


<!DOCTYPE HTML>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
	<head>
		<meta charset="utf-8">
		
		<meta http-equiv="content-type" content="text/html; charset=UTF-8"/>
		<link rel="stylesheet" href="https://static.cloud.coveo.com/searchui/v2.4382/css/CoveoFullSearch.css"/>
		<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
		<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
		<meta name="description"/>
		<meta name="keywords"/>
		<meta property="og:title" content=""/>
		<meta property="og:description"/>
		<!-- favicon -->
		<link rel="icon" type="image/vnd.microsoft.icon" href="../../_static/favicon.ico"/>
		<link rel="shortcut icon" type="image/vnd.microsoft.icon" href="../../_static/favicon.ico"/>
		<!-- Fonts -->
		<link href="https://fonts.googleapis.com/css?family=Roboto:300,400,500" rel="stylesheet" type="text/css"/>

  
  
  
  

  
      <script type="text/javascript" src="../../_static/js/jquery.min.js"></script>
	  <script type="text/javascript" src="../../_static/js/gtm.js"></script>
  <script type="text/javascript" src="../../_static/js/modernizr.min.js"></script>
    <script type="text/javascript" src="../../_static/js/d3dd8c60ed.js"></script>
    <script type="text/javascript" src="../../_static/js/common-ui-all.min.js"></script>
    <script type="text/javascript" src="../../_static/js/header-footer.min.js"></script>
    <script type="text/javascript" src="../../_static/js/jquery-ui.min.js"></script>
    <script type="text/javascript" src="../../_static/js/CoveoJsSearch.Lazy.min.js"></script>
    <script type="text/javascript" src="../../_static/js/linkid.js"></script>
    <script type="text/javascript" src="../../_static/js/Searchbox.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../../_static/jquery.js"></script>
        <script type="text/javascript" src="../../_static/underscore.js"></script>
        <script type="text/javascript" src="../../_static/doctools.js"></script>
    
    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/css/common-ui-all.min.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/css/header-footer.min.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/css/pro.min.css" media="all" />
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Compiling and Simulating Using the Makefile" href="compiling-and-simulating.html" />
    <link rel="prev" title="Introduction" href="introduction.html" /> 
	</head>
	<body>
		<div class="xilinx-bs3"/>
		<div class="root responsivegrid">
			<div class="aem-Grid aem-Grid--16 aem-Grid--default--16 aem-Grid--large--16 aem-Grid--xlarge--16 aem-Grid--xxlarge--16 aem-Grid--xxxlarge--16 ">
				<div class="xilinxExperienceFragments experiencefragment aem-GridColumn aem-GridColumn--default--12">
					<div class="xf-content-height">
						<div class="aem-Grid aem-Grid--16 aem-Grid--default--16 ">
							<div class="header parbase aem-GridColumn aem-GridColumn--default--12">
								<noindex>
									<header data-component="header">
										<nav class="navbar navbar-default aem-Grid aem-Grid--16">
											<div class="aem-GridColumn aem-GridColumn--xxxlarge--none aem-GridColumn--xsmall--16 aem-GridColumn--offset--xsmall--0 aem-GridColumn--xlarge--none aem-GridColumn--xxlarge--none aem-GridColumn--default--none aem-GridColumn--offset--large--1 aem-GridColumn--xlarge--12 aem-GridColumn--offset--default--0 aem-GridColumn--xxlarge--10 aem-GridColumn--offset--xlarge--2 aem-GridColumn--offset--xxlarge--3 aem-GridColumn--offset--xxxlarge--4 aem-GridColumn--xsmall--none aem-GridColumn--large--none aem-GridColumn aem-GridColumn--large--14 aem-GridColumn--xxxlarge--8 aem-GridColumn--default--16">
												<div class="container-fluid main-nav">
													<div class="row">
														<div class="col-xs-12">
															<div class="logo-column">
																<div class="logo">
																	<a href="https://www.xilinx.com/">
																	<img src="https://github.com/Xilinx/Image-Collateral/blob/main/xilinx-header-logo.svg?raw=true" title="Xilinx Inc"/>
																	</a>
																</div>
															</div>
															<div class="navbar-column">
																<div class="navbar navbar-collapse collapse" id="xilinx-main-menu">
																	<div class="mobile-search-container">
																		<div id="headerSearchBox" class="headerSearch"
																			data-component="header-search"
																			data-redirect-if-empty="false"
																			data-coveo-access-token="xxa237d4dd-f0aa-47fc-9baa-af9121851b33"
																			data-coveo-organization-id="xilinxcomprode2rjoqok">
																			<div class='coveo-search-section'>
																				<div class="CoveoAnalytics" data-search-hub="Site"></div>
																				<ul class="dropdown-menu options">
																					<li class="option" data-label="All" data-action-link="https://www.xilinx.com/search/site-keyword-search.html" data-search-hub="Site">
																						<a href="#">
																						All</a>
																					</li>
																					<li data-label="Silicon Devices" data-action-link="https://www.xilinx.com//products/silicon-devices/si-keyword-search.html" data-search-hub="Product">
																						<a href="#">
																						Silicon Devices</a>
																					</li>
																					<li data-label="Boards and Kits" data-action-link="https://www.xilinx.com//products/boards-and-kits/bk-keyword-search.html" data-search-hub="Product">
																						<a href="#">
																						Boards and Kits</a>
																					</li>
																					<li data-label="Intellectual Property" data-action-link="https://www.xilinx.com//products/intellectual-property/ip-keyword-search.html" data-search-hub="Product">
																						<a href="#">
																						Intellectual Property</a>
																					</li>
																					<li data-label="Support" class="option" data-action-link="https://www.xilinx.com/search/support-keyword-search.html" data-search-hub="Support">
																						<a href="#">
																						Support</a>
																						<ul>
																							<li data-label="Documentation" data-action-link="https://www.xilinx.com//support/documentation-navigation/documentation-keyword-search.html" data-search-hub="Document">
																								<a href="#">
																								Documentation</a>
																							</li>
																							<li data-label="Knowledge Base" data-action-link="https://www.xilinx.com//support/answer-navigation/answer-keyword-search.html" data-search-hub="AnswerRecord">
																								<a href="#">
																								Knowledge Base</a>
																							</li>
																							<li data-label="Community Forums" data-action-link="https://www.xilinx.com/search/forums-keyword-search.html" data-search-hub="Forums">
																								<a href="#">
																								Community Forums</a>
																							</li>
																						</ul>
																					</li>
																					<li data-label="Partners" data-action-link="https://www.xilinx.com//alliance/member-keyword-search.html" data-search-hub="Partner">
																						<a href="#">
																						Partners</a>
																					</li>
																					<li data-label="Videos" data-action-link="https://www.xilinx.com/video/video-keyword-search.html" data-search-hub="Video">
																						<a href="#">
																						Videos</a>
																					</li>
																					<li data-label="Press" data-action-link="https://www.xilinx.com/search/press-keyword-search.html" data-search-hub="Press">
																						<a href="#">
																						Press</a>
																					</li>
																				</ul>
																				<a href="#" class="btn dropdown-toggle value" data-toggle="dropdown"></a>
																				<div class="CoveoSearchbox" data-id="coveosearchbox" data-action-link="https://www.xilinx.com/search/site-keyword-search.html" data-placeholder="Search Xilinx"></div>
																			</div>
																		</div>
																	</div>
																	<ul class="nav navbar-nav nav-justified">
																		<li class="accordion-toggle-icons" data-component="toggle-dropdown">
																			<a href="https://www.xilinx.com/applications.html">
																			Applications</a>
																		</li>
																		<li class="accordion-toggle-icons" data-component="toggle-dropdown">
																			<a href="https://www.xilinx.com/products/silicon-devices.html">
																			Products</a>
																		</li>
																		<li class="accordion-toggle-icons" data-component="toggle-dropdown">
																			<a href="https://developer.xilinx.com/">
																			Developers</a>
																		</li>
																		<li class="accordion-toggle-icons" data-component="toggle-dropdown">
																			<a href="https://www.xilinx.com/support.html">
																			Support</a>
																		</li>
																		<li class="accordion-toggle-icons" data-component="toggle-dropdown">
																			<a href="https://www.xilinx.com/about/company-overview.html">
																			About</a>
																		</li>
																	</ul>
																</div>
															</div>
															<script type="text/javascript" src="../../_static/js/gtm.js"></script>
															<!--<div class="mini-nav">
																<button type="button" data-function="xilinx-mobile-menu" id="nav-toggle" class="navbar-toggle collapsed visible-xs-block" aria-expanded="false">
																<span></span>
																<span></span>
																<span></span>
																<span></span>
																</button>
																<ul class="list-inline">
																	<li class="dropdown user-menu">
																		<button data-toggle="dropdown">
																		<span class="sr-only">Account</span>
																		<span class="fas fa-user"></span>
																		</button>
																		<ul class="dropdown-menu">
																			<li>
																				<a href="https://www.xilinx.com/myprofile/subscriptions.html">
																				My Account</a>
																			</li>
																			<li>
																				<a href="https://www.xilinx.com/registration/create-account.html">
																				Create Account</a>
																			</li>
																			<li>
																				<a href="https://www.xilinx.com/bin/protected/en/signout">
																				Sign Out</a>
																			</li>
																		</ul>
																	</li>
																	<li class="hidden-xs">
																		<button data-function="search-toggle">
																		<span class="sr-only">Search</span>
																		<span class="far fa-search"></span>
																		</button>
																	</li>
																</ul>
															</div>
															-->
															<div class="search-container">
																<div id="headerSearchBox" class="headerSearch"
																	data-component="header-search"
																	data-redirect-if-empty="false"
																	data-coveo-access-token="xxa237d4dd-f0aa-47fc-9baa-af9121851b33"
																	data-coveo-organization-id="xilinxcomprode2rjoqok">
																	<div class='coveo-search-section'>
																		<div class="CoveoAnalytics" data-search-hub="Site"></div>
																		<ul class="dropdown-menu options">
																			<li class="option" data-label="All" data-action-link="https://www.xilinx.com/search/site-keyword-search.html" data-search-hub="Site">
																				<a href="#">
																				All</a>
																			</li>
																			<li data-label="Silicon Devices" data-action-link="https://www.xilinx.com/products/silicon-devices/si-keyword-search.html" data-search-hub="Product">
																				<a href="#">
																				Silicon Devices</a>
																			</li>
																			<li data-label="Boards and Kits" data-action-link="https://www.xilinx.com/products/boards-and-kits/bk-keyword-search.html" data-search-hub="Product">
																				<a href="#">
																				Boards and Kits</a>
																			</li>
																			<li data-label="Intellectual Property" data-action-link="https://www.xilinx.com/products/intellectual-property/ip-keyword-search.html" data-search-hub="Product">
																				<a href="#">
																				Intellectual Property</a>
																			</li>
																			<li data-label="Support" class="option" data-action-link="https://www.xilinx.com/search/support-keyword-search.html" data-search-hub="Support">
																				<a href="#">
																				Support</a>
																				<ul>
																					<li data-label="Documentation" data-action-link="https://www.xilinx.com/support/documentation-navigation/documentation-keyword-search.html" data-search-hub="Document">
																						<a href="#">
																						Documentation</a>
																					</li>
																					<li data-label="Knowledge Base" data-action-link="https://www.xilinx.com/support/answer-navigation/answer-keyword-search.html" data-search-hub="AnswerRecord">
																						<a href="#">
																						Knowledge Base</a>
																					</li>
																					<li data-label="Community Forums" data-action-link="https://www.xilinx.com/search/forums-keyword-search.html" data-search-hub="Forums">
																						<a href="#">
																						Community Forums</a>
																					</li>
																				</ul>
																			</li>
																			<li data-label="Partners" data-action-link="https://www.xilinx.com/alliance/member-keyword-search.html" data-search-hub="Partner">
																				<a href="#">
																				Partners</a>
																			</li>
																			<li data-label="Videos" data-action-link="https://www.xilinx.com/video/video-keyword-search.html" data-search-hub="Video">
																				<a href="#">
																				Videos</a>
																			</li>
																			<li data-label="Press" data-action-link="https://www.xilinx.com/search/press-keyword-search.html" data-search-hub="Press">
																				<a href="#">
																				Press</a>
																			</li>
																		</ul>
																		<a href="#" class="btn dropdown-toggle value" data-toggle="dropdown"></a>
																		<div class="CoveoSearchbox" data-id="coveosearchbox" data-action-link="https://www.xilinx.com/search/site-keyword-search.html" data-placeholder="Search Xilinx"></div>
																	</div>
																</div>
																<button data-function="search-toggle">
																<span class="sr-only">Search</span>
																<span class="far fa-times"></span>
																</button>
															</div>
														</div>
													</div>
												</div>
											</div>
										</nav>
									</header>
								</noindex>
							</div>
						</div>
					</div>
				</div>
				<div class="parsys aem-GridColumn--xxxlarge--none aem-GridColumn--xlarge--none aem-GridColumn--xxlarge--none aem-GridColumn--default--none aem-GridColumn--offset--large--1 aem-GridColumn--xlarge--12 aem-GridColumn--offset--default--0 aem-GridColumn--xxlarge--10 aem-GridColumn--offset--xlarge--2 aem-GridColumn--offset--xxlarge--3 aem-GridColumn--offset--xxxlarge--4 aem-GridColumn--large--none aem-GridColumn aem-GridColumn--large--14 aem-GridColumn--xxxlarge--8 aem-GridColumn--default--16">
						<div class="container-fluid">
							<div class="row">
							<div class="col-xs-12">
   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../index.html" class="icon icon-home" alt="Documentation Home"> Vitis DSP Library
          

          
          </a>

          
            
            
              <div class="version">
                2021.2
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

      
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
            
            
            
              
            
            
              <p class="caption"><span class="caption-text">Library Overview</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../overview.html">Requirements</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../overview.html#license">License</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../overview.html#trademark-notice">Trademark Notice</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../release.html">Release Note</a></li>
</ul>
<p class="caption"><span class="caption-text">L1 PL DSP Library User Guide</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../L1.html">1-Dimensional(Line) SSR FFT L1 FPGA Module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../L1_2dfft.html">2-Dimensional(Matrix) SSR FFT L1 FPGA Module</a></li>
</ul>
<p class="caption"><span class="caption-text">L2 DSP Library User Guide</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="introduction.html">Introduction</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">DSP Library Functions</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#filters">Filters</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#conventions-for-filters">Conventions for Filters</a></li>
<li class="toctree-l3"><a class="reference internal" href="#streaming-interface-for-filters">Streaming interface for Filters</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#stream-output">Stream Output</a></li>
<li class="toctree-l4"><a class="reference internal" href="#stream-input-for-asymmetric-firs">Stream Input for Asymmetric FIRs</a></li>
<li class="toctree-l4"><a class="reference internal" href="#stream-input-for-symmetric-firs">Stream Input for Symmetric FIRs</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#fft-ifft">FFT/iFFT</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#scaling">Scaling</a></li>
<li class="toctree-l3"><a class="reference internal" href="#constraints">Constraints</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#matrix-multiply">Matrix Multiply</a></li>
<li class="toctree-l2"><a class="reference internal" href="#widgets">Widgets</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#widget-api-cast">Widget API Cast</a></li>
<li class="toctree-l3"><a class="reference internal" href="#widget-real-to-complex">Widget Real to Complex</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#dds-mixer">DDS / Mixer</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="compiling-and-simulating.html">Compiling and Simulating Using the Makefile</a></li>
<li class="toctree-l1"><a class="reference internal" href="using-examples.html">Using the Examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="benchmark.html">Benchmark/QoR</a></li>
</ul>
<p class="caption"><span class="caption-text">API Reference</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="api-reference.html">API Reference Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../rst/class_xf_dsp_aie_fir_sr_asym_fir_sr_asym_graph.html">fir_sr_asym_graph</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../rst/class_xf_dsp_aie_fir_sr_sym_fir_sr_sym_graph.html">fir_sr_sym_graph</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../rst/class_xf_dsp_aie_fir_interpolate_asym_fir_interpolate_asym_graph.html">fir_interpolate_asym_graph</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../rst/class_xf_dsp_aie_fir_decimate_hb_fir_decimate_hb_graph.html">fir_decimate_hb_graph</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../rst/class_xf_dsp_aie_fir_interpolate_hb_fir_interpolate_hb_graph.html">fir_interpolate_hb_graph</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../rst/class_xf_dsp_aie_fir_decimate_asym_fir_decimate_asym_graph.html">fir_decimate_asym_graph</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../rst/class_xf_dsp_aie_fir_interpolate_fract_asym_fir_interpolate_fract_asym_graph.html">fir_interpolate_fract_asym_graph</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../rst/class_xf_dsp_aie_fir_decimate_sym_fir_decimate_sym_graph.html">fir_decimate_sym_graph</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../rst/class_xf_dsp_aie_blas_matrix_mult_matrix_mult_graph.html">matrix_mult_graph</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../rst/class_xf_dsp_aie_fft_dit_1ch_fft_ifft_dit_1ch_base_graph.html">fft_ifft_dit_1ch_graph</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../rst/class_xf_dsp_aie_widget_api_cast_widget_api_cast_graph.html">widget_api_cast_graph</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../rst/class_xf_dsp_aie_widget_real2complex_widget_real2complex_graph.html">widget_real2complex_graph</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../rst/class_xf_dsp_aie_mixer_dds_mixer_dds_mixer_graph.html">dds_mixer_graph</a></li>
</ul>

            
			
			<p class="caption"><span class="caption-text">This Page</span></p>
				<ul class="current">
				  <li class="toctree-l1"><a href="../../_sources/user_guide/L2/dsp-lib-func.rst.txt"
						rel="nofollow">Show Source</a></li>
				</ul>
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">Vitis DSP Library</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>DSP Library Functions</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../_sources/user_guide/L2/dsp-lib-func.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="dsp-library-functions">
<span id="dsp-lib-func"></span><h1>DSP Library Functions<a class="headerlink" href="#dsp-library-functions" title="Permalink to this headline">¶</a></h1>
<p>The Xilinx® digital signal processing library (DSPLib) is a configurable library of elements that can be used to develop applications on Versal™ ACAP AI Engines. This is an Open Source library for DSP applications. The functions are captured in C++ as graph containing one or more kernels. An object of this graph class in your code can be used to access the application in question. An example design showing the use of DSP library elements is provided with this library for your reference. Although open source allows use of the kernels which capture the operational code within the library element, the use of the graph class in your graph is highly recommended. See the <a class="reference internal" href="using-examples.html#using-examples"><span class="std std-ref">Using the Examples</span></a>  for more details.</p>
<div class="section" id="filters">
<span id="id1"></span><h2>Filters<a class="headerlink" href="#filters" title="Permalink to this headline">¶</a></h2>
<p>The DSPLib contains several variants of Finite Impulse Response (FIR) filters. On the AI Engine processor, data is packetized into windows. In the case of FIRs, each window is extended by a margin so that the state of the filter at the end of the previous window may be restored before new computations begin. Therefore, to maximize performance, the window size should be set to the maximum that the system will allow, though this will lead to a corresponding increase in latency.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">For example, with a small window, say 32 samples, the overheads of window acquisition and release will be incurred for every 32 samples. Using a larger window will mean that a greater portion of time will be spent in active computation.</p>
</div>
<p>FIR filters have been categorized into classes and placed in a distinct namespace scope: xf::dsp::aie::fir, to prevent name collision in the global scope. Namespace aliasing can be utilized to shorten instantiations:</p>
<pre class="highlight literal-block">
<span></span><span class="n">namespace</span> <span class="n">dsplib</span> <span class="o">=</span> <span class="n">xf</span><span class="p">::</span><span class="n">dsp</span><span class="p">::</span><span class="n">aie</span><span class="p">;</span>
</pre>
<p>Additionally, each FIR filter has been placed in a unique FIR type namespace. The available FIR filter classes and the corresponding graph entry point are listed below:</p>
<p><em>Table 1</em>: FIR Filter Classes</p>
<table border="1" class="docutils">
<colgroup>
<col width="37%" />
<col width="63%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head"><strong>Function</strong></th>
<th class="head"><strong>Namespace and class name</strong></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>Single rate, asymmetrical</td>
<td>dsplib::fir::sr_asym::fir_sr_asym_graph</td>
</tr>
<tr class="row-odd"><td>Single rate, symmetrical</td>
<td>dsplib::fir::sr_sym::fir_sr_sym_graph</td>
</tr>
<tr class="row-even"><td>Interpolation asymmetrical</td>
<td>dsplib::fir::interpolate_asym::fir_interpolate_asym_graph</td>
</tr>
<tr class="row-odd"><td>Decimation, halfband</td>
<td>dsplib::fir::decimate_hb::fir_decimate_hb_graph</td>
</tr>
<tr class="row-even"><td>Interpolation, halfband</td>
<td>dsplib::fir::interpolate_hb::fir_interpolate_hb_graph</td>
</tr>
<tr class="row-odd"><td>Decimation, asymmetric</td>
<td>dsplib::fir::decimate_asym::fir_decimate_asym_graph</td>
</tr>
<tr class="row-even"><td>Interpolation, fractional,
asymmetric</td>
<td>dsplib::fir::interpolate_fract_asym::
fir_interpolate_fract_asym_graph</td>
</tr>
<tr class="row-odd"><td>Decimation, symmetric</td>
<td>dsplib::fir::decimate_sym::fir_decimate_sym_graph</td>
</tr>
</tbody>
</table>
<div class="section" id="conventions-for-filters">
<h3>Conventions for Filters<a class="headerlink" href="#conventions-for-filters" title="Permalink to this headline">¶</a></h3>
<p>All FIR filters can be configured for various types of data and coefficients. These types can be int16, int32, or float, and also real or complex. However, configurations with real data versus complex coefficients are not supported nor are configurations where the coefficents are a higher precision type than the data type. Data and coefficients must both be integer types or both be float types, as mixes are not supported.</p>
<p>The following table lists the supported combinations of data type and coefficient type.</p>
<p><em>Table 2</em>: Supported Combinations of Data Type and Coefficient Type</p>
<table border="1" class="docutils">
<colgroup>
<col width="15%" />
<col width="11%" />
<col width="13%" />
<col width="13%" />
<col width="11%" />
<col width="13%" />
<col width="11%" />
<col width="14%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head" colspan="8"><strong>Data Type</strong></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>&#160;</td>
<td>&#160;</td>
<td><strong>Int16</strong></td>
<td><strong>Cint16</strong></td>
<td><strong>Int32</strong></td>
<td><strong>Cint32</strong></td>
<td><strong>Float</strong></td>
<td><strong>Cfloat</strong></td>
</tr>
<tr class="row-odd"><td>Coefficient
type</td>
<td><strong>Int16</strong></td>
<td>Supported</td>
<td>Supported</td>
<td>Supported</td>
<td>Supported</td>
<td>3</td>
<td>3</td>
</tr>
<tr class="row-even"><td>&#160;</td>
<td><strong>Cint16</strong></td>
<td>1</td>
<td>Supported</td>
<td>1</td>
<td>Supported</td>
<td>3</td>
<td>3</td>
</tr>
<tr class="row-odd"><td>&#160;</td>
<td><strong>Int32</strong></td>
<td>2</td>
<td>2</td>
<td>Supported</td>
<td>Supported</td>
<td>3</td>
<td>3</td>
</tr>
<tr class="row-even"><td>&#160;</td>
<td><strong>Cint32</strong></td>
<td>1, 2</td>
<td>2</td>
<td>1</td>
<td>Supported</td>
<td>3</td>
<td>3</td>
</tr>
<tr class="row-odd"><td>&#160;</td>
<td><strong>Float</strong></td>
<td>3</td>
<td>3</td>
<td>3</td>
<td>3</td>
<td>Supported</td>
<td>Supported</td>
</tr>
<tr class="row-even"><td>&#160;</td>
<td><strong>Cfloat</strong></td>
<td>3</td>
<td>3</td>
<td>3</td>
<td>3</td>
<td>3</td>
<td>Supported</td>
</tr>
<tr class="row-odd"><td colspan="8"><ol class="first last arabic simple">
<li>Complex coefficients are not supported for real-only data types.</li>
<li>Coefficient type of higher precision than data type is not supported.</li>
<li>A mix of float and integer types is not supported.</li>
</ol>
</td>
</tr>
</tbody>
</table>
<p>For all filters, the coefficient values are passed, not as template parameters, but as an array argument to the constructor for non-reloadable configurations, or to the reload function for reloadable configurations. In the case of symmetrical filters, only the first half (plus any odd centre tap) need be passed, as the remainder may be derived by symmetry. For halfband filters, only the non-zero coefficients should be entered, with the centre tap last in the array. The length of the array expected will therefore be (TP_FIR_LEN+1)/4+1, e.g. 4 non-zero tap values, including the centre tap, are expected for a halfband filter of length 11.</p>
<p>The following table lists parameters supported by all the FIR filters:</p>
<p><em>Table 3</em>: Parameters Supported by FIR Filters</p>
<table border="1" class="docutils">
<colgroup>
<col width="33%" />
<col width="22%" />
<col width="22%" />
<col width="22%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Parameter Name</th>
<th class="head">Type</th>
<th class="head">Description</th>
<th class="head">Range</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>TP_FIR_LEN</td>
<td>Unsigned
int</td>
<td>The number of
taps</td>
<td>4 to 240</td>
</tr>
<tr class="row-odd"><td>TP_RND</td>
<td>Unsigned
int</td>
<td>Round mode</td>
<td><p class="first">0 =
truncate or
floor</p>
<p>1 =
ceiling</p>
<p>2 =
positive
infinity</p>
<p>3 =
negative
infinity</p>
<p>4 =
symmetrical
to infinity</p>
<p>5 =
symmetrical
to zero</p>
<p>6 =
convergent
to even</p>
<p class="last">7 =
convergent
to odd</p>
</td>
</tr>
<tr class="row-even"><td>TP_SHIFT</td>
<td>Unsigned
int</td>
<td>The number of
bits to shift
unscaled
result
down by before
output.</td>
<td>0 to 61</td>
</tr>
<tr class="row-odd"><td>TT_DATA</td>
<td>Typename</td>
<td>Data Type</td>
<td>int16,
cint16,
int32,
cint32,
float,
cfloat</td>
</tr>
<tr class="row-even"><td>TT_COEFF</td>
<td>Typename</td>
<td>Coefficient
type</td>
<td>int16,
cint16,
int32,
cint32,
float,
cfloat</td>
</tr>
<tr class="row-odd"><td>TP_INPUT_WINDOW_VSIZE</td>
<td>Unsigned
int</td>
<td>The number
of samples
in the
input
window.</td>
<td><p class="first">Must be a
multiple of
the number
of lanes
used
(typically
4 or 8).</p>
<p class="last">No
enforced
range, but
large
windows
will result
in mapper
errors due
to
excessive
RAM use.</p>
</td>
</tr>
<tr class="row-even"><td>TP_CASC_LEN</td>
<td>Unsigned
int</td>
<td>The number
of cascaded
kernels to
use for
this FIR.</td>
<td><p class="first">1 to 9.</p>
<p class="last">Defaults to
1 if not
set.</p>
</td>
</tr>
<tr class="row-odd"><td>TP_DUAL_IP</td>
<td>Unsigned
int</td>
<td><p class="first">Use dual
inputs ports.</p>
<p class="last">An additional
‘in2’ input
port will
appear on
the graph
when set to 1.</p>
</td>
<td><p class="first">Range 0
(single
input), 1
(dual
input).</p>
<p class="last">Defaults to
0 if not
set.</p>
</td>
</tr>
<tr class="row-even"><td>TP_USE_COEFF_RELOAD</td>
<td>Unsigned
int</td>
<td><p class="first">Enable
reloadable
coefficient
feature.</p>
<p class="last">An additional
‘coeff’ RTP
port will
appear on
the graph.</p>
</td>
<td><p class="first">0 (no
reload), 1
(use
reloads).</p>
<p class="last">Defaults to
0 if not
set.</p>
</td>
</tr>
<tr class="row-odd"><td>TP_NUM_OUTPUTS</td>
<td>Unsigned
int</td>
<td><p class="first">Number of
fir output
ports</p>
<p class="last">An additional
‘out2’ output
port will
appear on
the graph
when set to 2.</p>
</td>
<td><p class="first">1 to 2</p>
<p class="last">Defaults to
1 if not
set.</p>
</td>
</tr>
<tr class="row-even"><td>TP_API</td>
<td>Unsigned
int</td>
<td>I/O interface
port type</td>
<td><p class="first">0 = Window</p>
<p class="last">1 = Stream</p>
</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The number of lanes is the number of data elements that are being processed in parallel. This varies depending on the data type (i.e., number of bits in each element) and the register or bus width.</p>
</div>
<p><strong>TP_API</strong> specifies if the input/output interface should be window-based or stream-based.
The values supported are 0 (window API) or 1 (stream API).</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">TP_API template parameter is currently only supported with single rate FIRs.</p>
</div>
<p><strong>TP_CASC_LEN</strong> describes the number of AIE processors to split the operation over, which allows resource to be traded for higher performance. TP_CASC_LEN must be in the range 1 (default) to 9.
FIR graph instance consists of TP_CASC_LEN kernels and the FIR length (TP_FIR_LEN) is divided by the requested cascade length and each kernel in the graph gets assigned a fraction of the workload.
Kernels are connected with cascade ports, which pass partial accumulation products downstream until last kernel in chain produces the output.</p>
<p><strong>TP_DUAL_IP</strong> is an implementation trade-off between performance and resource utilization.
Symmetric FIRs may be may be instanced with 2 input ports to alleviate the potential for memory read contention, which would otherwise result in stall cycles and therefore lower throughput.
In addition, FIRs with streaming interface may utilize the second input port to maximize the available throughput.</p>
<ul>
<li><p class="first">When set to 0, the FIR is created with a single input port.</p>
</li>
<li><p class="first">When set to 1, two input ports will be created.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">when used, port: <code class="docutils literal notranslate"> <span class="pre">port&lt;input&gt;</span> <span class="pre">in2;</span></code> will be added to the FIR.</p>
</div>
</li>
</ul>
<p><strong>TP_USE_COEFF_RELOAD</strong>  allows the user to select if runtime coefficient reloading should be used.
When defining the parameter:</p>
<ul>
<li><p class="first">0 = static coefficients, defined in filter constructor</p>
</li>
<li><p class="first">1 = reloadable coefficients, passed as argument to runtime function.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">when used, port: <code class="docutils literal notranslate"> <span class="pre">port&lt;input&gt;</span> <span class="pre">coeff;</span></code> will be added to the FIR.</p>
</div>
</li>
</ul>
<p><strong>TP_NUM_OUTPUTS</strong> sets the number of output ports to send the output data to. Supported range: 1 to 2.</p>
<p>For Windows API, additional output provides flexibility in connecting FIR output with multiple destinations.
Additional output <code class="docutils literal notranslate"><span class="pre">out2</span></code> is an exact copy of the data of the output port <code class="docutils literal notranslate"><span class="pre">out</span></code>.</p>
<p>Stream API uses the additional output port to increase the FIR’s throughput. Please refer to <a class="reference internal" href="#fir-stream-output"><span class="std std-ref">Stream Output</span></a> for more details.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">when used, port: <code class="docutils literal notranslate"> <span class="pre">port&lt;output&gt;</span> <span class="pre">out2;</span></code> will be added to the FIR.</p>
</div>
</div>
<div class="section" id="streaming-interface-for-filters">
<h3>Streaming interface for Filters<a class="headerlink" href="#streaming-interface-for-filters" title="Permalink to this headline">¶</a></h3>
<p>Streaming interfaces are now supported by single rate FIRs.
When TP_API is set to 1 the FIR will have stream API input and output ports. Such filters have lower latency than window API filters because there is no window to fill before execution can begin.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Streaming interface is currently only supported with single rate FIRs.</p>
</div>
<div class="section" id="stream-output">
<span id="fir-stream-output"></span><h4>Stream Output<a class="headerlink" href="#stream-output" title="Permalink to this headline">¶</a></h4>
<p>Stream output allows computed data samples to be directly sent over the stream without the requirement for a ping-pong window buffer.
As a result, memory use and latency are reduced.
Furthermore, the streaming output allows data samples to be broadcast to multiple destinations.</p>
<p>To maximize the throughput, FIRs can be configured with 2 output stream ports.
Set TP_NUM_OUTPUTS template parameter to 2, to create a FIR kernel with 2 output stream ports.
In this scenario, the output data from the two streams is interleaved in chunks of 128 bits. E.g.:</p>
<ul class="simple">
<li>samples 0-3 to be sent over output stream 0 for cint16 data type,</li>
<li>samples 4-7 to be sent over output stream 1 for cint16 data type.</li>
</ul>
</div>
<div class="section" id="stream-input-for-asymmetric-firs">
<h4>Stream Input for Asymmetric FIRs<a class="headerlink" href="#stream-input-for-asymmetric-firs" title="Permalink to this headline">¶</a></h4>
<p>Stream input allows data samples to be directly written from the input stream to one of the Input Vector Registers without the requirement for a ping-pong window buffer.
As a result, memory requirements and latency are reduced.</p>
<p>To maximize the throughput, Asymmetric FIRs can be configured with 2 input stream ports.
Set TP_DUAL_IP to 1, to create a FIR instance with 2 input stream ports.
In such a case the input data will be interleaved from the two ports to one data stream internally in 128 bit chunks, e.g.:</p>
<ul class="simple">
<li>samples 0-3 to be received on input stream 0 for cint16 data type,</li>
<li>samples 4-7 to be received on input stream 1 for cint16 data type.</li>
</ul>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Dual input streams offer no throughput gain if only single output stream would be used. Therefore, dual input streams are only supported with 2 output streams.</p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Dual input ports offer no throughput gain if port api is windows. Therefore, dual input ports are only supported with streams and not windows.</p>
</div>
</div>
<div class="section" id="stream-input-for-symmetric-firs">
<h4>Stream Input for Symmetric FIRs<a class="headerlink" href="#stream-input-for-symmetric-firs" title="Permalink to this headline">¶</a></h4>
<p>Symmetric FIRs require access to data from 2 distinctive areas of the data stream and therefore require memory storage.
In symmetric FIRs the stream input is connected to an input ping-pong window buffer through a DMA port of a Memory Module.</p>
</div>
</div>
</div>
<div class="section" id="fft-ifft">
<span id="id2"></span><h2>FFT/iFFT<a class="headerlink" href="#fft-ifft" title="Permalink to this headline">¶</a></h2>
<p>The DSPLib contains one FFT/iFFT solution. This is a single channel, decimation in time (DIT) implementation. It has configurable point size, data type, forward/reverse direction, scaling (as a shift), cascade length, static/dynamic point size, window size, interface api (stream/window) and parallelism factor.
Table 4 lists the template parameters used to configure the top level graph of the fft_ifft_dit_1ch_graph class.</p>
<p><em>Table 4</em>: FFT Parameters</p>
<table border="1" class="docutils">
<colgroup>
<col width="25%" />
<col width="18%" />
<col width="26%" />
<col width="31%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head"><strong>Name</strong></th>
<th class="head"><strong>Type</strong></th>
<th class="head">Description</th>
<th class="head"><strong>Range</strong></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>TT_DATA</td>
<td>Typename</td>
<td>The input
data type</td>
<td>cint16,
cint32,
cfloat</td>
</tr>
<tr class="row-odd"><td>TT_TWIDDLE</td>
<td>Typename</td>
<td>The twiddle factor
type.
Determined by
by TT_DATA</td>
<td>Set to cint16 for data
type of cint16 or cint32
and cfloat for data type
of  cfloat.</td>
</tr>
<tr class="row-even"><td>TP_POINT_SIZE</td>
<td>Unsigned
int</td>
<td>The number of
samples in a frame
to be processed</td>
<td>2^N, where N is in the
range 4 to 16, though
the upper limit may be
constrained by device
resources.</td>
</tr>
<tr class="row-odd"><td>TP_FFT_NIFFT</td>
<td>Unsigned
int</td>
<td>Forward or reverse
transform</td>
<td>0 (IFFT) or
1 (FFT).</td>
</tr>
<tr class="row-even"><td>TP_SHIFT</td>
<td>Unsigned
int
int</td>
<td>The number of bits
to shift unscaled
result
down by before output</td>
<td>0 to 61</td>
</tr>
<tr class="row-odd"><td>TP_CASC_LEN</td>
<td>Unsigned
int</td>
<td>The number of kernels
the FFT will
be divided over.</td>
<td><p class="first">1 to 12.
Defaults to 1
if not set.</p>
<p>Maximum is derived by the
number of radix 2 stages
required for the given
point size (N where
pointSize = 2^N)</p>
<p class="last">For float data types the
max is N.
For integer data types
the max is CEIL(N/2).</p>
</td>
</tr>
<tr class="row-even"><td>TP_DYN_PT_SIZE</td>
<td>Unsigned
int</td>
<td>Selects static point
size or runtime
dynamic point size</td>
<td>0 (Static point size)
1 (dynamic point size)</td>
</tr>
<tr class="row-odd"><td>TP_WINDOW_VSIZE</td>
<td>Unsigned
int</td>
<td>The number of samples
in the input window.</td>
<td>Must be a multiple of the
number of lanes used
(typically 4 or 8). No
enforced range, but large
windows will result in
mapper errors due to
excessive memory usage.</td>
</tr>
<tr class="row-even"><td>TP_API</td>
<td>Unsigned
int</td>
<td>Selects between
streams and windows
for I/O</td>
<td>0 (windows for input
and output),
1 (streams for input
and output)</td>
</tr>
<tr class="row-odd"><td>TP_PARALLEL_POWER</td>
<td>Unsigned
int</td>
<td>Selects the
parallelism factor
as a power of 2</td>
<td>0 to 4 (1 to 16 kernel
-lanes of processing)</td>
</tr>
</tbody>
</table>
<p><strong>TT_DATA</strong>: Supports only the 3 types listed. For real-only FFT/IFFT operation, consider using the library element widget_real2complex to convert real-only data to complex and vice versa.</p>
<p><strong>TT_TWIDDLE</strong>: Is entirely determined by the choice of TT_DATA.</p>
<p><strong>TP_POINT_SIZE</strong>: Must be a power of 2 with a minimum value of 16. The maximum value supported by the library element is 65536, but the achievable maximum will be determined by mapping limitations. For instance, a single tile implementation can achieve a maximum of 4096, but this may require single rather than pingpong window interfaces depending on data type.</p>
<p><strong>TP_SHIFT</strong>: Can be used to implement the 1/N scaling of an IFFT.</p>
<p><strong>TP_CASC_LEN</strong>: Splits the FFT/IFFT operation over multiple kernels in series, with each subsequent kernel being placed on an adjacent tile. This is to achieve higher throughput.</p>
<p><strong>TP_DYN_PT_SIZE</strong>: When set to static point size all data will be expected in frames of TP_POINT_SIZE data samples, though multiple frames may be input together using TP_WINDOW_VSIZE. When set to dynamic point size each _window_ must be preceeded by a 256bit header to describe the run-time parameters of that window. Note that TP_WINDOW_VSIZE described the number of samples in a window so does not include this header. The format of the header is described in Table 5. When TP_DYN_PT_SIZE =1 TP_POINT_SIZE describes the maximum point size which may be input.</p>
<p><em>Table 5</em>: Header Format</p>
<table border="1" class="docutils">
<colgroup>
<col width="23%" />
<col width="16%" />
<col width="60%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Field name</th>
<th class="head">Location (TT_DATA
sample)</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>Direction</td>
<td>0 (real part)</td>
<td>0 (inverse FFT) 1 (forward FFT)</td>
</tr>
<tr class="row-odd"><td>Point size (radix2 stages)</td>
<td>1 (real part)</td>
<td>Point size described as a power of 2. E.g. 5 described a   point size of 32.</td>
</tr>
<tr class="row-even"><td>Reserved</td>
<td>2</td>
<td>reserved</td>
</tr>
<tr class="row-odd"><td>Status (output only)</td>
<td>3 (real part)</td>
<td>0 = legal point size, 1 = illegal point size</td>
</tr>
</tbody>
</table>
<p>The locations are set to suit TT_DATA type. That is, for TT_DATA=cint16, direction is described in the first cint16 (real part) of the 256 bit header and point size is described in the real part of the second cint16 value.
Similarly, for TT_DATA=cint32, the real part of the first cint32 value in the header holds the direction field and the second cint32 value’s real part holds the Point size (radix2) field.</p>
<p>Note that for TT_DATA=cfloat, the values in the header are expected as cfloat and are value-cast (not reinterpret-cast) to integers internally. The output window also has a header. This is copied from the input header except for the status field, which is inserted. The status field is ignored on input. If an illegal point size is entered, the output header will have this field set to a non-zero value and the remainder of the output window is undefined.</p>
<p><strong>TP_WINDOW_VSIZE</strong>: Describes the number of data samples in the supplied window. If stream input is selected, an FFT operation will not begin until this number of samples has been input. TP_WINDOW_VSIZE does not include the 256 bit header when dynamic point size is used. TP_WINDOW_VSIZE is intended to improve performance for small point sizes by incurring the kernel acquisition and release overheads only once per window rather than once per frame of data.</p>
<p><strong>TP_API</strong>: Selects between window (0) and stream (1) input/output. When set to 1, the FFT will have 2 stream port per subframe processor so as to maximize performance. Samples must be input to each stream in turn. E.g. with TP_PARALLEL_POWER=2 there will be 8 stream inputs. Samples 0 to 7 must be input one to each port, followed by samples 8 to 15, so port(0) will receive samples 0, 8, 16, etc.
On output, each stream will output a splice of the overall frame. So in the above example, output port(0) will output samples 0 to TP_POINT_SIZE/8-1.</p>
<p><strong>TP_PARALLEL_POWER</strong>: If greater than 0, TP_CASC_LEN applies to the subframe FFT rather than the FFT as a whole. For instance, with TP_POINT_SIZE=16384 and TP_PARALLEL_POWER = 3 there will be 8 subframe FFTs each of point size 2048. The TP_CASC_LEN in this case would be limited to 6 for integer TT_DATA types and 11 for TT_DATA = cfloat.</p>
<p>TP_PARALLEL_POWER is intended to improve performance and also allow support of point sizes beyond the limitations of a single tile. Diagram <a class="reference internal" href="#figure-1"><span class="std std-ref">Figure 1: Applying Design Constraints</span></a> shows an example graph with TP_PARALLEL_POWER set to 2. This results in 4 subframe processors in parallel each performing an FFT of N/2^TP_PARALLEL_POWER point size. These subframe outputs are then combined by TP_PARALLEL_POWER stages of radix2  to create the final result. The order of samples is described in the note for TP_API above.</p>
<div class="section" id="scaling">
<h3>Scaling<a class="headerlink" href="#scaling" title="Permalink to this headline">¶</a></h3>
<p>This FFT implementation does not implement the 1/N scaling of an IFFT. Internally, for cint16 and cint32 data, an internal data type of cint32 is used. After each rank, the values are scaled by only enough to normalize the bit growth caused by the twiddle multiplication (i.e., 15 bits). Distortion caused by saturation will be possible for large point sizes and large values when the data type is cint32.</p>
<p>In the case of TP_PARALLEL_POWER &gt; 0 for cint16, scaling is applied at the end of the subframe processor and in each radix2 combiner stage so that cint16 is the data type used for internal streams for maximal performance. In this case, TP_SHIFT-TP_PARALLEL_POWER is applied as the TP_SHIFT value to each subframe processor and a TP_SHIFT of 1 is applied in each radix2 combiner stage. Better noise performance may be achieved at the expense of throughput by using TT_DATA=cint32.</p>
<p>No scaling is applied at any point when the data type is cfloat. Setting TP_SHIFT to any value other than 0 when TT_DATA is cfloat will result in an error.”</p>
<p>The graph entry point is the following:</p>
<pre class="highlight literal-block">
<span></span><span class="n">xf</span><span class="p">::</span><span class="n">dsp</span><span class="p">::</span><span class="n">aie</span><span class="p">::</span><span class="n">fft</span><span class="p">::</span><span class="n">fft_ifft_dit_1ch_graph</span>
</pre>
</div>
<div class="section" id="constraints">
<h3>Constraints<a class="headerlink" href="#constraints" title="Permalink to this headline">¶</a></h3>
<p>The FFT design has large memory requirements for data buffering and twiddle storage. Constraints may be necessary to fit a design or to achieve high performance, such as ensuring FFT kernels do not share tiles with other FFT kernels or user kernels. To apply constraints you must know the instance names of the internal graph hierarchy of the FFT. See <a class="reference internal" href="#figure-1"><span class="std std-ref">Figure 1: Applying Design Constraints</span></a> below.</p>
<div class="figure" id="id6">
<span id="figure-1"></span><img alt="../../_images/figure8.png" src="../../_images/figure8.png" />
<p class="caption"><span class="caption-text"><em>Figure 1:</em> <strong>Applying Design Constraints</strong></span></p>
</div>
<p>The FFT class is implemented as a recursion of the top level to implement the parallelism. The instance names of each pair of subgraphs in the recursion are FFTsubframe(0) and FFTsubframe(1). In the final level of recursion, the FFT graph will contain an instance of either FFTwinproc (for TP_API = 0) or FFTstrproc (when TP_API=1). Within this level there is an array of kernels called m_fftKernels which will have TP_CASC_LEN members.</p>
<p>The stream to window conversion kernels on input and output to the fft subframes are at the same level as m_fftKernels and are called m_inWidgetKernel and m_outWidgetKernel respectively.
Each level of recursion will also contain an array of radix2 combiner kernels and associated stream to window conversion kernels. These are seen as a column of kernels in the above figure.
Their instance names are m_r2Comb[] for the radix2 combiners and m_combInKernel[] and m_combOutKernel[] for the input and output widget kernels respectively.</p>
<p>Examples of constraints: For TP_PARALLEL_POWER=2, to set the runtime ratio of the 3rd of 4 subframe FFTs, the constraint could look like this:</p>
<pre class="highlight literal-block">
<span></span><span class="n">Runtime</span><span class="o">&lt;</span><span class="n">ratio</span><span class="o">&gt;</span><span class="p">(</span><span class="n">myFFT</span><span class="o">.</span><span class="n">FFTsubframe</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">FFTsubframe</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">FFTstrproc</span><span class="o">.</span><span class="n">m_kernels</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">=</span> <span class="mf">0.9</span><span class="p">;</span> <span class="o">//</span><span class="n">where</span> <span class="n">myFFT</span> <span class="ow">is</span> <span class="n">the</span> <span class="n">instance</span> <span class="n">name</span> <span class="n">of</span> <span class="n">the</span> <span class="n">FFT</span> <span class="ow">in</span> <span class="n">your</span> <span class="n">design</span><span class="o">.</span>
</pre>
<p>For the same example, to ensure that the second radix2 combiner kernel in the first column of combiners and its input widget do not share a tile, the constraint could look like this:</p>
<pre class="highlight literal-block">
<span></span><span class="n">not_equal</span><span class="p">(</span><span class="n">location</span><span class="o">&lt;</span><span class="n">kernel</span><span class="o">&gt;</span><span class="p">(</span><span class="n">myFFT</span><span class="o">.</span><span class="n">FFTsubframe</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">m_combInKernel</span><span class="p">[</span><span class="mi">1</span><span class="p">]),</span><span class="n">location</span><span class="o">&lt;</span><span class="n">kernel</span><span class="o">&gt;</span><span class="p">(</span> <span class="n">myFFT</span><span class="o">.</span><span class="n">FFTsubframe</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">m_r2Comb</span><span class="p">[</span><span class="mi">1</span><span class="p">]));</span>
</pre>
</div>
</div>
<div class="section" id="matrix-multiply">
<span id="id3"></span><h2>Matrix Multiply<a class="headerlink" href="#matrix-multiply" title="Permalink to this headline">¶</a></h2>
<p>The DSPLib contains one Matrix Multiply/GEMM (GEneral Matrix Multiply) solution. The gemm has two input ports connected to two windows of data. The inputs are denoted as Matrix A (inA) and Matrix B (inB). Matrix A has a template parameter TP_DIM_A to describe the number of rows of A. The number of columns of inA must be equal to the number of rows of inB. This is denoted with the template parameter TP_DIM_AB. The number of columns of B is denoted by TP_DIM_B.</p>
<p>An output port connects to a window, where the data for the output matrix will be stored. The output matrix will have rows = inA rows (TP_DIM_A) and columns = inB (TP_DIM_B) columns. The data type of both input matrices can be configured and the data type of the output is derived from the inputs.</p>
<p><em>Table 6</em>: Matrix Multiply Parameters</p>
<table border="1" class="docutils">
<colgroup>
<col width="37%" />
<col width="21%" />
<col width="21%" />
<col width="21%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head"><strong>Name</strong></th>
<th class="head"><strong>Type</strong></th>
<th class="head">Description</th>
<th class="head"><strong>Range</strong></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>TT_DATA_A</td>
<td>Typename</td>
<td>The input
data type</td>
<td>int16,
cint16,
int32,
cint32,
float,
cfloat</td>
</tr>
<tr class="row-odd"><td>TT_DATA_B</td>
<td>Typename</td>
<td>The input
data type</td>
<td>int16,
cint16,
int32,
cint32,
float,
cfloat</td>
</tr>
<tr class="row-even"><td>TP_DIM_A</td>
<td>Unsigned int</td>
<td>The number of
elements along
the unique
dimension
(rows) of
Matrix A</td>
<td>&#160;</td>
</tr>
<tr class="row-odd"><td>TP_DIM_AB</td>
<td>Unsigned int</td>
<td>The number of
elements along
the common
dimension
of Matrix A
(columns) and
Matrix B
(rows)</td>
<td>&#160;</td>
</tr>
<tr class="row-even"><td>TP_DIM_B</td>
<td>Unsigned int</td>
<td>The number of
elements along
the unique
dimension
(rows) of
Matrix B</td>
<td>&#160;</td>
</tr>
<tr class="row-odd"><td>TP_SHIFT</td>
<td>Unsigned int</td>
<td>power of 2
shift down
applied to the
unscaled
result
of product
terms before
each output</td>
<td>In range
0 to 61</td>
</tr>
<tr class="row-even"><td>TP_RND</td>
<td>Unsigned int</td>
<td>Round mode</td>
<td><p class="first">0 =
truncate or
floor</p>
<p>1 =
ceiling</p>
<p>2 =
positive
infinity</p>
<p>3 =
negative
infinity</p>
<p>4 =
symmetrical
to infinity</p>
<p>5 =
symmetrical
to zero</p>
<p>6 =
convergent
to even</p>
<p class="last">7 =
convergent
to odd</p>
</td>
</tr>
<tr class="row-odd"><td>TP_DIM_A_LEADING</td>
<td>Unsigned int</td>
<td>The scheme in
which the data
for matrix A
should be
stored in
memory</td>
<td><p class="first">ROW_MAJOR = 0</p>
<p class="last">COL_MAJOR = 1</p>
</td>
</tr>
<tr class="row-even"><td>TP_DIM_B_LEADING</td>
<td>Unsigned int</td>
<td>The scheme in
which the data
for matrix B
should be
stored in
memory</td>
<td><p class="first">ROW_MAJOR = 0</p>
<p class="last">COL_MAJOR = 1</p>
</td>
</tr>
<tr class="row-odd"><td>TP_DIM_OUT_LEADING</td>
<td>Unsigned int</td>
<td>The scheme in
which the data
for output
matrix
should be
stored in
memory</td>
<td><p class="first">ROW_MAJOR = 0</p>
<p class="last">COL_MAJOR = 1</p>
</td>
</tr>
<tr class="row-even"><td>TP_ADD_TILING_A</td>
<td>Unsigned int</td>
<td>Option to add
an additional
kernel to
rearrange
matrix samples</td>
<td><p class="first">0 = rearrange
externally to
the graph</p>
<p class="last">1 = rearrange
internally
within the
graph. Adds a
tiling kernel
to design.</p>
</td>
</tr>
<tr class="row-odd"><td>TP_ADD_TILING_B</td>
<td>Unsigned int</td>
<td>Option to add
an additional
kernel to
rearrange
matrix samples</td>
<td><p class="first">0 = rearrange
externally to
the graph</p>
<p class="last">1 = rearrange
internally
within the
graph. Adds a
tiling kernel
to design.</p>
</td>
</tr>
<tr class="row-even"><td>TP_ADD_DETILING_OUT</td>
<td>Unsigned int</td>
<td>Option to add
an additional
kernel to
rearrange
matrix samples</td>
<td><p class="first">0 = rearrange
externally to
the graph</p>
<p class="last">1 = rearrange
internally
within the
graph. Adds a
tiling kernel
to design.</p>
</td>
</tr>
<tr class="row-odd"><td>TP_WINDOW_VSIZE_A</td>
<td>Unsigned
int</td>
<td>The number
of samples
in the
input
window for
Matrix A</td>
<td>Must be of
size
TP_DIM_A*
TP_DIM_AB*N
has a default
value of
TP_DIM_A*
TP_DIM_AB
(N=1)</td>
</tr>
<tr class="row-even"><td>TP_WINDOW_VSIZE_B</td>
<td>Unsigned
int</td>
<td>The number
of samples
in the
input
window for
Matrix B</td>
<td>Must be of
size
TP_DIM_B*
TP_DIM_AB*M
has a default
value of
TP_DIM_B*
TP_DIM_AB
(M=1)</td>
</tr>
<tr class="row-odd"><td>TP_CASC_LEN</td>
<td>Unsigned
int</td>
<td>The number of
AIE tiles to
split the
operation into</td>
<td>Defaults to
1 if not
set.</td>
</tr>
</tbody>
</table>
<p>Input matrices are processed in distinct blocks. Matrix elements must be rearranged into a specific pattern.</p>
<p>The following table demonstrates how a 16x16 input matrix should be rearranged into a 4x4 tiling pattern.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Indices are quoted assuming a row major matrix. A column major matrix would be the transpose of the table below.</p>
</div>
<p><em>Table 7</em>: Matrix Multiply 4x4 tiling pattern</p>
<table border="1" class="docutils">
<colgroup>
<col width="10%" />
<col width="6%" />
<col width="6%" />
<col width="6%" />
<col width="6%" />
<col width="6%" />
<col width="6%" />
<col width="6%" />
<col width="6%" />
<col width="6%" />
<col width="6%" />
<col width="6%" />
<col width="6%" />
<col width="6%" />
<col width="6%" />
<col width="6%" />
<col width="6%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">&#160;</th>
<th class="head" colspan="4">Tile Col 0</th>
<th class="head" colspan="4">Tile Col 1</th>
<th class="head" colspan="4">Tile Col 2</th>
<th class="head" colspan="4">Tile Col 3</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td rowspan="4">Tile Row 0</td>
<td>0</td>
<td>1</td>
<td>2</td>
<td>3</td>
<td>4</td>
<td>5</td>
<td>6</td>
<td>7</td>
<td>8</td>
<td>9</td>
<td>10</td>
<td>11</td>
<td>12</td>
<td>13</td>
<td>14</td>
<td>15</td>
</tr>
<tr class="row-odd"><td>16</td>
<td>17</td>
<td>18</td>
<td>19</td>
<td>20</td>
<td>21</td>
<td>22</td>
<td>23</td>
<td>24</td>
<td>25</td>
<td>26</td>
<td>27</td>
<td>28</td>
<td>29</td>
<td>30</td>
<td>31</td>
</tr>
<tr class="row-even"><td>32</td>
<td>33</td>
<td>34</td>
<td>35</td>
<td>36</td>
<td>37</td>
<td>38</td>
<td>39</td>
<td>40</td>
<td>41</td>
<td>42</td>
<td>43</td>
<td>44</td>
<td>45</td>
<td>46</td>
<td>47</td>
</tr>
<tr class="row-odd"><td>48</td>
<td>49</td>
<td>50</td>
<td>51</td>
<td>52</td>
<td>53</td>
<td>54</td>
<td>55</td>
<td>56</td>
<td>57</td>
<td>58</td>
<td>59</td>
<td>60</td>
<td>61</td>
<td>62</td>
<td>63</td>
</tr>
<tr class="row-even"><td rowspan="4">Tile Row 1</td>
<td>64</td>
<td>65</td>
<td>66</td>
<td>67</td>
<td>68</td>
<td>69</td>
<td>70</td>
<td>71</td>
<td>72</td>
<td>73</td>
<td>74</td>
<td>75</td>
<td>76</td>
<td>77</td>
<td>78</td>
<td>79</td>
</tr>
<tr class="row-odd"><td>80</td>
<td>81</td>
<td>82</td>
<td>83</td>
<td>84</td>
<td>85</td>
<td>86</td>
<td>87</td>
<td>88</td>
<td>89</td>
<td>90</td>
<td>91</td>
<td>92</td>
<td>93</td>
<td>94</td>
<td>95</td>
</tr>
<tr class="row-even"><td>96</td>
<td>97</td>
<td>98</td>
<td>99</td>
<td>100</td>
<td>101</td>
<td>102</td>
<td>103</td>
<td>104</td>
<td>105</td>
<td>106</td>
<td>107</td>
<td>108</td>
<td>109</td>
<td>110</td>
<td>111</td>
</tr>
<tr class="row-odd"><td>112</td>
<td>113</td>
<td>114</td>
<td>115</td>
<td>116</td>
<td>117</td>
<td>118</td>
<td>119</td>
<td>120</td>
<td>121</td>
<td>122</td>
<td>123</td>
<td>124</td>
<td>125</td>
<td>126</td>
<td>127</td>
</tr>
<tr class="row-even"><td rowspan="4">Tile Row 2</td>
<td>128</td>
<td>129</td>
<td>130</td>
<td>131</td>
<td>132</td>
<td>133</td>
<td>134</td>
<td>135</td>
<td>136</td>
<td>137</td>
<td>138</td>
<td>139</td>
<td>140</td>
<td>141</td>
<td>142</td>
<td>143</td>
</tr>
<tr class="row-odd"><td>144</td>
<td>145</td>
<td>146</td>
<td>147</td>
<td>148</td>
<td>149</td>
<td>150</td>
<td>151</td>
<td>152</td>
<td>153</td>
<td>154</td>
<td>155</td>
<td>156</td>
<td>157</td>
<td>158</td>
<td>159</td>
</tr>
<tr class="row-even"><td>160</td>
<td>161</td>
<td>162</td>
<td>163</td>
<td>164</td>
<td>165</td>
<td>166</td>
<td>167</td>
<td>168</td>
<td>169</td>
<td>170</td>
<td>171</td>
<td>172</td>
<td>173</td>
<td>174</td>
<td>175</td>
</tr>
<tr class="row-odd"><td>176</td>
<td>177</td>
<td>178</td>
<td>179</td>
<td>180</td>
<td>181</td>
<td>182</td>
<td>183</td>
<td>184</td>
<td>185</td>
<td>186</td>
<td>187</td>
<td>188</td>
<td>189</td>
<td>190</td>
<td>191</td>
</tr>
<tr class="row-even"><td rowspan="4">Tile Row 3</td>
<td>192</td>
<td>193</td>
<td>194</td>
<td>195</td>
<td>196</td>
<td>197</td>
<td>198</td>
<td>199</td>
<td>200</td>
<td>201</td>
<td>202</td>
<td>203</td>
<td>204</td>
<td>205</td>
<td>206</td>
<td>207</td>
</tr>
<tr class="row-odd"><td>208</td>
<td>209</td>
<td>210</td>
<td>211</td>
<td>212</td>
<td>213</td>
<td>214</td>
<td>215</td>
<td>216</td>
<td>217</td>
<td>218</td>
<td>219</td>
<td>220</td>
<td>221</td>
<td>222</td>
<td>223</td>
</tr>
<tr class="row-even"><td>224</td>
<td>225</td>
<td>226</td>
<td>227</td>
<td>228</td>
<td>229</td>
<td>230</td>
<td>231</td>
<td>232</td>
<td>233</td>
<td>234</td>
<td>235</td>
<td>236</td>
<td>237</td>
<td>238</td>
<td>239</td>
</tr>
<tr class="row-odd"><td>240</td>
<td>241</td>
<td>242</td>
<td>243</td>
<td>244</td>
<td>245</td>
<td>246</td>
<td>247</td>
<td>248</td>
<td>249</td>
<td>250</td>
<td>251</td>
<td>252</td>
<td>253</td>
<td>254</td>
<td>255</td>
</tr>
</tbody>
</table>
<p>This is stored contiguously in memory like:</p>
<p>0, 1, 2, 3, 16, 17, 18, 19, 32, 33, 34, 35, 48, 49, 50, 51, 4, 5, 6, 7, 20, 21, 22, 23, 36, 37, 38, 39, 52, 53, 54, 55, 8, 9, 10, 11, 24, 25, 26, 27, 40, 41, 42, 43, 56, 57, 58, 59, 12, 13, 14, 15, 28, 29, 30, 31, 44, 45, 46, 47, 60, 61, 62, 63, 64, 65, 66, 67, 80, 81, 82, 83, 96, 97, 98, 99, 112, 113, 114, 115, … , 204, 205, 206, 207, 220, 221, 222, 223, 236, 237, 238, 239, 252, 253, 254, 255</p>
<p>The following table demonstrates how a 16x16 input matrix should be rearranged into a 4x2 tiling pattern.</p>
<p><em>Table 8</em>: Matrix Multiply 4x2 tiling pattern</p>
<table border="1" class="docutils">
<colgroup>
<col width="10%" />
<col width="6%" />
<col width="6%" />
<col width="6%" />
<col width="6%" />
<col width="6%" />
<col width="6%" />
<col width="6%" />
<col width="6%" />
<col width="6%" />
<col width="6%" />
<col width="6%" />
<col width="6%" />
<col width="6%" />
<col width="6%" />
<col width="6%" />
<col width="6%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">&#160;</th>
<th class="head" colspan="2">Tile Col 0</th>
<th class="head" colspan="2">Tile Col 1</th>
<th class="head" colspan="2">Tile Col 2</th>
<th class="head" colspan="2">Tile Col 3</th>
<th class="head" colspan="2">Tile Col 4</th>
<th class="head" colspan="2">Tile Col 5</th>
<th class="head" colspan="2">Tile Col 6</th>
<th class="head" colspan="2">Tile Col 7</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td rowspan="4">Tile Row 0</td>
<td>0</td>
<td>1</td>
<td>2</td>
<td>3</td>
<td>4</td>
<td>5</td>
<td>6</td>
<td>7</td>
<td>8</td>
<td>9</td>
<td>10</td>
<td>11</td>
<td>12</td>
<td>13</td>
<td>14</td>
<td>15</td>
</tr>
<tr class="row-odd"><td>16</td>
<td>17</td>
<td>18</td>
<td>19</td>
<td>20</td>
<td>21</td>
<td>22</td>
<td>23</td>
<td>24</td>
<td>25</td>
<td>26</td>
<td>27</td>
<td>28</td>
<td>29</td>
<td>30</td>
<td>31</td>
</tr>
<tr class="row-even"><td>32</td>
<td>33</td>
<td>34</td>
<td>35</td>
<td>36</td>
<td>37</td>
<td>38</td>
<td>39</td>
<td>40</td>
<td>41</td>
<td>42</td>
<td>43</td>
<td>44</td>
<td>45</td>
<td>46</td>
<td>47</td>
</tr>
<tr class="row-odd"><td>48</td>
<td>49</td>
<td>50</td>
<td>51</td>
<td>52</td>
<td>53</td>
<td>54</td>
<td>55</td>
<td>56</td>
<td>57</td>
<td>58</td>
<td>59</td>
<td>60</td>
<td>61</td>
<td>62</td>
<td>63</td>
</tr>
<tr class="row-even"><td rowspan="4">Tile Row 1</td>
<td>64</td>
<td>65</td>
<td>66</td>
<td>67</td>
<td>68</td>
<td>69</td>
<td>70</td>
<td>71</td>
<td>72</td>
<td>73</td>
<td>74</td>
<td>75</td>
<td>76</td>
<td>77</td>
<td>78</td>
<td>79</td>
</tr>
<tr class="row-odd"><td>80</td>
<td>81</td>
<td>82</td>
<td>83</td>
<td>84</td>
<td>85</td>
<td>86</td>
<td>87</td>
<td>88</td>
<td>89</td>
<td>90</td>
<td>91</td>
<td>92</td>
<td>93</td>
<td>94</td>
<td>95</td>
</tr>
<tr class="row-even"><td>96</td>
<td>97</td>
<td>98</td>
<td>99</td>
<td>100</td>
<td>101</td>
<td>102</td>
<td>103</td>
<td>104</td>
<td>105</td>
<td>106</td>
<td>107</td>
<td>108</td>
<td>109</td>
<td>110</td>
<td>111</td>
</tr>
<tr class="row-odd"><td>112</td>
<td>113</td>
<td>114</td>
<td>115</td>
<td>116</td>
<td>117</td>
<td>118</td>
<td>119</td>
<td>120</td>
<td>121</td>
<td>122</td>
<td>123</td>
<td>124</td>
<td>125</td>
<td>126</td>
<td>127</td>
</tr>
<tr class="row-even"><td rowspan="4">Tile Row 2</td>
<td>128</td>
<td>129</td>
<td>130</td>
<td>131</td>
<td>132</td>
<td>133</td>
<td>134</td>
<td>135</td>
<td>136</td>
<td>137</td>
<td>138</td>
<td>139</td>
<td>140</td>
<td>141</td>
<td>142</td>
<td>143</td>
</tr>
<tr class="row-odd"><td>144</td>
<td>145</td>
<td>146</td>
<td>147</td>
<td>148</td>
<td>149</td>
<td>150</td>
<td>151</td>
<td>152</td>
<td>153</td>
<td>154</td>
<td>155</td>
<td>156</td>
<td>157</td>
<td>158</td>
<td>159</td>
</tr>
<tr class="row-even"><td>160</td>
<td>161</td>
<td>162</td>
<td>163</td>
<td>164</td>
<td>165</td>
<td>166</td>
<td>167</td>
<td>168</td>
<td>169</td>
<td>170</td>
<td>171</td>
<td>172</td>
<td>173</td>
<td>174</td>
<td>175</td>
</tr>
<tr class="row-odd"><td>176</td>
<td>177</td>
<td>178</td>
<td>179</td>
<td>180</td>
<td>181</td>
<td>182</td>
<td>183</td>
<td>184</td>
<td>185</td>
<td>186</td>
<td>187</td>
<td>188</td>
<td>189</td>
<td>190</td>
<td>191</td>
</tr>
<tr class="row-even"><td rowspan="4">Tile Row 3</td>
<td>192</td>
<td>193</td>
<td>194</td>
<td>195</td>
<td>196</td>
<td>197</td>
<td>198</td>
<td>199</td>
<td>200</td>
<td>201</td>
<td>202</td>
<td>203</td>
<td>204</td>
<td>205</td>
<td>206</td>
<td>207</td>
</tr>
<tr class="row-odd"><td>208</td>
<td>209</td>
<td>210</td>
<td>211</td>
<td>212</td>
<td>213</td>
<td>214</td>
<td>215</td>
<td>216</td>
<td>217</td>
<td>218</td>
<td>219</td>
<td>220</td>
<td>221</td>
<td>222</td>
<td>223</td>
</tr>
<tr class="row-even"><td>224</td>
<td>225</td>
<td>226</td>
<td>227</td>
<td>228</td>
<td>229</td>
<td>230</td>
<td>231</td>
<td>232</td>
<td>233</td>
<td>234</td>
<td>235</td>
<td>236</td>
<td>237</td>
<td>238</td>
<td>239</td>
</tr>
<tr class="row-odd"><td>240</td>
<td>241</td>
<td>242</td>
<td>243</td>
<td>244</td>
<td>245</td>
<td>246</td>
<td>247</td>
<td>248</td>
<td>249</td>
<td>250</td>
<td>251</td>
<td>252</td>
<td>253</td>
<td>254</td>
<td>255</td>
</tr>
</tbody>
</table>
<p>This is stored contiguously in memory like:</p>
<p>0, 1, 16, 17, 32, 33, 48, 49, 2, 3, 18, 19, 34, 35, 50, 51, …, 206, 207, 222, 223, 238, 239, 254, 255</p>
<p>Multiplying a 16x16 matrix (with 4x4 tiling) with a 16x16 matrix (with 4x2 tiling) will result in a 16x16 matrix with 4x2 tiling.</p>
<p>The following table specifies the tiling scheme used for a given data type combination and the corresponding output data type:</p>
<p><em>Table 9</em>: Matrix Multiply tiling pattern combination</p>
<table border="1" class="docutils">
<colgroup>
<col width="17%" />
<col width="27%" />
<col width="15%" />
<col width="13%" />
<col width="27%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head" colspan="2">Input Type Combination</th>
<th class="head" colspan="2">Tiling Scheme</th>
<th class="head">Output Type</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>A</td>
<td>B</td>
<td>A</td>
<td>B</td>
<td>&#160;</td>
</tr>
<tr class="row-odd"><td>int16</td>
<td>int16</td>
<td>4x4</td>
<td>4x4</td>
<td>int16</td>
</tr>
<tr class="row-even"><td>int16</td>
<td>cint16</td>
<td>4x2</td>
<td>2x2</td>
<td>cint16</td>
</tr>
<tr class="row-odd"><td>int16</td>
<td>int32</td>
<td>4x2</td>
<td>2x2</td>
<td>int32</td>
</tr>
<tr class="row-even"><td>int16</td>
<td>cint32</td>
<td>2x4</td>
<td>4x2</td>
<td>cint32</td>
</tr>
<tr class="row-odd"><td>cint16</td>
<td>int16</td>
<td>4x4</td>
<td>4x2</td>
<td>cint16</td>
</tr>
<tr class="row-even"><td>cint16</td>
<td>cint16</td>
<td>4x4</td>
<td>4x2</td>
<td>cint16</td>
</tr>
<tr class="row-odd"><td>cint16</td>
<td>int32</td>
<td>4x4</td>
<td>4x2</td>
<td>cint32</td>
</tr>
<tr class="row-even"><td>cint16</td>
<td>cint32</td>
<td>2x2</td>
<td>2x2</td>
<td>cint32</td>
</tr>
<tr class="row-odd"><td>int32</td>
<td>int16</td>
<td>4x4</td>
<td>4x2</td>
<td>int32</td>
</tr>
<tr class="row-even"><td>int32</td>
<td>int32</td>
<td>4x4</td>
<td>4x2</td>
<td>int32</td>
</tr>
<tr class="row-odd"><td>int32</td>
<td>cint16</td>
<td>4x4</td>
<td>4x2</td>
<td>cint32</td>
</tr>
<tr class="row-even"><td>int32</td>
<td>cint32</td>
<td>2x2</td>
<td>2x2</td>
<td>cint32</td>
</tr>
<tr class="row-odd"><td>cint32</td>
<td>int16</td>
<td>2x4</td>
<td>4x2</td>
<td>cint32</td>
</tr>
<tr class="row-even"><td>cint32</td>
<td>cint16</td>
<td>2x2</td>
<td>2x2</td>
<td>cint32</td>
</tr>
<tr class="row-odd"><td>cint32</td>
<td>int32</td>
<td>2x2</td>
<td>2x2</td>
<td>cint32</td>
</tr>
<tr class="row-even"><td>cint32</td>
<td>cint32</td>
<td>2x2</td>
<td>2x2</td>
<td>cint32</td>
</tr>
<tr class="row-odd"><td>float</td>
<td>float</td>
<td>4x4</td>
<td>4x2</td>
<td>float</td>
</tr>
<tr class="row-even"><td>float</td>
<td>cfloat</td>
<td>2x4</td>
<td>4x2</td>
<td>cfloat</td>
</tr>
<tr class="row-odd"><td>cfloat</td>
<td>float</td>
<td>2x4</td>
<td>4x2</td>
<td>cfloat</td>
</tr>
<tr class="row-even"><td>cfloat</td>
<td>cfloat</td>
<td>4x2</td>
<td>2x2</td>
<td>cfloat</td>
</tr>
</tbody>
</table>
<p>The parameters TP_ADD_TILING_A, TP_ADD_TILING_B, and TP_ADD_DETILING_OUT control the inclusion of an additional pre-processing / post-processing kernel to perform the required data data storage re-ordering. When used with TP_DIM_A_LEADING, TP_DIM_B_LEADING, or TP_DIM_OUT_LEADING, the matrix is also transposed in the tiling kernel.</p>
<p>If the additional kernels are not selected, then the matrix multiply kernels assume incoming data is in the correct format, as specified above. When using the TP_CASC_LEN parameter, the matrix multiply operation is split across TP_DIM_AB and processed in a TP_CASC_LEN number of kernels. The accumulated partial results of each kernel are passed down the cascade port to the next kernel in the cascade chain until the final kernel provides the expected output. Cascade connections are made internally to the matrix multiply graph.</p>
<p>Each AI Engine kernel in the array is given a sub-matrix, so the interface to the graph is an array of ports for both A and B.</p>
<p><strong>Input Matrix A (16x16 - 4x4 Tile - Cascade Length 2)</strong>:</p>
<p><em>Table 10</em>: Input Matrix A (16x16 - 4x4 Tile - Cascade Length 2)</p>
<table border="1" class="docutils">
<colgroup>
<col width="10%" />
<col width="6%" />
<col width="6%" />
<col width="6%" />
<col width="6%" />
<col width="6%" />
<col width="6%" />
<col width="6%" />
<col width="6%" />
<col width="6%" />
<col width="6%" />
<col width="6%" />
<col width="6%" />
<col width="6%" />
<col width="6%" />
<col width="6%" />
<col width="6%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">&#160;</th>
<th class="head" colspan="8">AIE 0</th>
<th class="head" colspan="8">AIE 1</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>&#160;</td>
<td colspan="4">Tile Col 0</td>
<td colspan="4">Tile Col 1</td>
<td colspan="4">Tile Col 2</td>
<td colspan="4">Tile Col 3</td>
</tr>
<tr class="row-odd"><td rowspan="4">Tile Row 0</td>
<td>0</td>
<td>1</td>
<td>2</td>
<td>3</td>
<td>4</td>
<td>5</td>
<td>6</td>
<td>7</td>
<td>8</td>
<td>9</td>
<td>10</td>
<td>11</td>
<td>12</td>
<td>13</td>
<td>14</td>
<td>15</td>
</tr>
<tr class="row-even"><td>16</td>
<td>17</td>
<td>18</td>
<td>19</td>
<td>20</td>
<td>21</td>
<td>22</td>
<td>23</td>
<td>24</td>
<td>25</td>
<td>26</td>
<td>27</td>
<td>28</td>
<td>29</td>
<td>30</td>
<td>31</td>
</tr>
<tr class="row-odd"><td>32</td>
<td>33</td>
<td>34</td>
<td>35</td>
<td>36</td>
<td>37</td>
<td>38</td>
<td>39</td>
<td>40</td>
<td>41</td>
<td>42</td>
<td>43</td>
<td>44</td>
<td>45</td>
<td>46</td>
<td>47</td>
</tr>
<tr class="row-even"><td>48</td>
<td>49</td>
<td>50</td>
<td>51</td>
<td>52</td>
<td>53</td>
<td>54</td>
<td>55</td>
<td>56</td>
<td>57</td>
<td>58</td>
<td>59</td>
<td>60</td>
<td>61</td>
<td>62</td>
<td>63</td>
</tr>
<tr class="row-odd"><td rowspan="4">Tile Row 1</td>
<td>64</td>
<td>65</td>
<td>66</td>
<td>67</td>
<td>68</td>
<td>69</td>
<td>70</td>
<td>71</td>
<td>72</td>
<td>73</td>
<td>74</td>
<td>75</td>
<td>76</td>
<td>77</td>
<td>78</td>
<td>79</td>
</tr>
<tr class="row-even"><td>80</td>
<td>81</td>
<td>82</td>
<td>83</td>
<td>84</td>
<td>85</td>
<td>86</td>
<td>87</td>
<td>88</td>
<td>89</td>
<td>90</td>
<td>91</td>
<td>92</td>
<td>93</td>
<td>94</td>
<td>95</td>
</tr>
<tr class="row-odd"><td>96</td>
<td>97</td>
<td>98</td>
<td>99</td>
<td>100</td>
<td>101</td>
<td>102</td>
<td>103</td>
<td>104</td>
<td>105</td>
<td>106</td>
<td>107</td>
<td>108</td>
<td>109</td>
<td>110</td>
<td>111</td>
</tr>
<tr class="row-even"><td>112</td>
<td>113</td>
<td>114</td>
<td>115</td>
<td>116</td>
<td>117</td>
<td>118</td>
<td>119</td>
<td>120</td>
<td>121</td>
<td>122</td>
<td>123</td>
<td>124</td>
<td>125</td>
<td>126</td>
<td>127</td>
</tr>
<tr class="row-odd"><td rowspan="4">Tile Row 2</td>
<td>128</td>
<td>129</td>
<td>130</td>
<td>131</td>
<td>132</td>
<td>133</td>
<td>134</td>
<td>135</td>
<td>136</td>
<td>137</td>
<td>138</td>
<td>139</td>
<td>140</td>
<td>141</td>
<td>142</td>
<td>143</td>
</tr>
<tr class="row-even"><td>144</td>
<td>145</td>
<td>146</td>
<td>147</td>
<td>148</td>
<td>149</td>
<td>150</td>
<td>151</td>
<td>152</td>
<td>153</td>
<td>154</td>
<td>155</td>
<td>156</td>
<td>157</td>
<td>158</td>
<td>159</td>
</tr>
<tr class="row-odd"><td>160</td>
<td>161</td>
<td>162</td>
<td>163</td>
<td>164</td>
<td>165</td>
<td>166</td>
<td>167</td>
<td>168</td>
<td>169</td>
<td>170</td>
<td>171</td>
<td>172</td>
<td>173</td>
<td>174</td>
<td>175</td>
</tr>
<tr class="row-even"><td>176</td>
<td>177</td>
<td>178</td>
<td>179</td>
<td>180</td>
<td>181</td>
<td>182</td>
<td>183</td>
<td>184</td>
<td>185</td>
<td>186</td>
<td>187</td>
<td>188</td>
<td>189</td>
<td>190</td>
<td>191</td>
</tr>
<tr class="row-odd"><td rowspan="4">Tile Row 3</td>
<td>192</td>
<td>193</td>
<td>194</td>
<td>195</td>
<td>196</td>
<td>197</td>
<td>198</td>
<td>199</td>
<td>200</td>
<td>201</td>
<td>202</td>
<td>203</td>
<td>204</td>
<td>205</td>
<td>206</td>
<td>207</td>
</tr>
<tr class="row-even"><td>208</td>
<td>209</td>
<td>210</td>
<td>211</td>
<td>212</td>
<td>213</td>
<td>214</td>
<td>215</td>
<td>216</td>
<td>217</td>
<td>218</td>
<td>219</td>
<td>220</td>
<td>221</td>
<td>222</td>
<td>223</td>
</tr>
<tr class="row-odd"><td>224</td>
<td>225</td>
<td>226</td>
<td>227</td>
<td>228</td>
<td>229</td>
<td>230</td>
<td>231</td>
<td>232</td>
<td>233</td>
<td>234</td>
<td>235</td>
<td>236</td>
<td>237</td>
<td>238</td>
<td>239</td>
</tr>
<tr class="row-even"><td>240</td>
<td>241</td>
<td>242</td>
<td>243</td>
<td>244</td>
<td>245</td>
<td>246</td>
<td>247</td>
<td>248</td>
<td>249</td>
<td>250</td>
<td>251</td>
<td>252</td>
<td>253</td>
<td>254</td>
<td>255</td>
</tr>
</tbody>
</table>
<p><strong>Input Matrix B (16x16 - 4x2 Tile - Cascade Length 2)</strong>:</p>
<p><em>Table 11</em>: Input Matrix B (16x16 - 4x2 Tile - Cascade Length 2)</p>
<table border="1" class="docutils">
<colgroup>
<col width="9%" />
<col width="9%" />
<col width="5%" />
<col width="5%" />
<col width="5%" />
<col width="5%" />
<col width="5%" />
<col width="5%" />
<col width="5%" />
<col width="5%" />
<col width="5%" />
<col width="5%" />
<col width="5%" />
<col width="5%" />
<col width="5%" />
<col width="5%" />
<col width="5%" />
<col width="5%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">&#160;</th>
<th class="head">&#160;</th>
<th class="head" colspan="2">Tile Col 0</th>
<th class="head" colspan="2">Tile Col 1</th>
<th class="head" colspan="2">Tile Col 2</th>
<th class="head" colspan="2">Tile Col 3</th>
<th class="head" colspan="2">Tile Col 4</th>
<th class="head" colspan="2">Tile Col 5</th>
<th class="head" colspan="2">Tile Col 6</th>
<th class="head" colspan="2">Tile Col 7</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td rowspan="8">AIE 0</td>
<td rowspan="4">Tile Row 0</td>
<td>0</td>
<td>1</td>
<td>2</td>
<td>3</td>
<td>4</td>
<td>5</td>
<td>6</td>
<td>7</td>
<td>8</td>
<td>9</td>
<td>10</td>
<td>11</td>
<td>12</td>
<td>13</td>
<td>14</td>
<td>15</td>
</tr>
<tr class="row-odd"><td>16</td>
<td>17</td>
<td>18</td>
<td>19</td>
<td>20</td>
<td>21</td>
<td>22</td>
<td>23</td>
<td>24</td>
<td>25</td>
<td>26</td>
<td>27</td>
<td>28</td>
<td>29</td>
<td>30</td>
<td>31</td>
</tr>
<tr class="row-even"><td>32</td>
<td>33</td>
<td>34</td>
<td>35</td>
<td>36</td>
<td>37</td>
<td>38</td>
<td>39</td>
<td>40</td>
<td>41</td>
<td>42</td>
<td>43</td>
<td>44</td>
<td>45</td>
<td>46</td>
<td>47</td>
</tr>
<tr class="row-odd"><td>48</td>
<td>49</td>
<td>50</td>
<td>51</td>
<td>52</td>
<td>53</td>
<td>54</td>
<td>55</td>
<td>56</td>
<td>57</td>
<td>58</td>
<td>59</td>
<td>60</td>
<td>61</td>
<td>62</td>
<td>63</td>
</tr>
<tr class="row-even"><td rowspan="4">Tile Row 1</td>
<td>64</td>
<td>65</td>
<td>66</td>
<td>67</td>
<td>68</td>
<td>69</td>
<td>70</td>
<td>71</td>
<td>72</td>
<td>73</td>
<td>74</td>
<td>75</td>
<td>76</td>
<td>77</td>
<td>78</td>
<td>79</td>
</tr>
<tr class="row-odd"><td>80</td>
<td>81</td>
<td>82</td>
<td>83</td>
<td>84</td>
<td>85</td>
<td>86</td>
<td>87</td>
<td>88</td>
<td>89</td>
<td>90</td>
<td>91</td>
<td>92</td>
<td>93</td>
<td>94</td>
<td>95</td>
</tr>
<tr class="row-even"><td>96</td>
<td>97</td>
<td>98</td>
<td>99</td>
<td>100</td>
<td>101</td>
<td>102</td>
<td>103</td>
<td>104</td>
<td>105</td>
<td>106</td>
<td>107</td>
<td>108</td>
<td>109</td>
<td>110</td>
<td>111</td>
</tr>
<tr class="row-odd"><td>112</td>
<td>113</td>
<td>114</td>
<td>115</td>
<td>116</td>
<td>117</td>
<td>118</td>
<td>119</td>
<td>120</td>
<td>121</td>
<td>122</td>
<td>123</td>
<td>124</td>
<td>125</td>
<td>126</td>
<td>127</td>
</tr>
<tr class="row-even"><td rowspan="8">AIE 1</td>
<td rowspan="4">Tile Row 2</td>
<td>128</td>
<td>129</td>
<td>130</td>
<td>131</td>
<td>132</td>
<td>133</td>
<td>134</td>
<td>135</td>
<td>136</td>
<td>137</td>
<td>138</td>
<td>139</td>
<td>140</td>
<td>141</td>
<td>142</td>
<td>143</td>
</tr>
<tr class="row-odd"><td>144</td>
<td>145</td>
<td>146</td>
<td>147</td>
<td>148</td>
<td>149</td>
<td>150</td>
<td>151</td>
<td>152</td>
<td>153</td>
<td>154</td>
<td>155</td>
<td>156</td>
<td>157</td>
<td>158</td>
<td>159</td>
</tr>
<tr class="row-even"><td>160</td>
<td>161</td>
<td>162</td>
<td>163</td>
<td>164</td>
<td>165</td>
<td>166</td>
<td>167</td>
<td>168</td>
<td>169</td>
<td>170</td>
<td>171</td>
<td>172</td>
<td>173</td>
<td>174</td>
<td>175</td>
</tr>
<tr class="row-odd"><td>176</td>
<td>177</td>
<td>178</td>
<td>179</td>
<td>180</td>
<td>181</td>
<td>182</td>
<td>183</td>
<td>184</td>
<td>185</td>
<td>186</td>
<td>187</td>
<td>188</td>
<td>189</td>
<td>190</td>
<td>191</td>
</tr>
<tr class="row-even"><td rowspan="4">Tile Row 3</td>
<td>192</td>
<td>193</td>
<td>194</td>
<td>195</td>
<td>196</td>
<td>197</td>
<td>198</td>
<td>199</td>
<td>200</td>
<td>201</td>
<td>202</td>
<td>203</td>
<td>204</td>
<td>205</td>
<td>206</td>
<td>207</td>
</tr>
<tr class="row-odd"><td>208</td>
<td>209</td>
<td>210</td>
<td>211</td>
<td>212</td>
<td>213</td>
<td>214</td>
<td>215</td>
<td>216</td>
<td>217</td>
<td>218</td>
<td>219</td>
<td>220</td>
<td>221</td>
<td>222</td>
<td>223</td>
</tr>
<tr class="row-even"><td>224</td>
<td>225</td>
<td>226</td>
<td>227</td>
<td>228</td>
<td>229</td>
<td>230</td>
<td>231</td>
<td>232</td>
<td>233</td>
<td>234</td>
<td>235</td>
<td>236</td>
<td>237</td>
<td>238</td>
<td>239</td>
</tr>
<tr class="row-odd"><td>240</td>
<td>241</td>
<td>242</td>
<td>243</td>
<td>244</td>
<td>245</td>
<td>246</td>
<td>247</td>
<td>248</td>
<td>249</td>
<td>250</td>
<td>251</td>
<td>252</td>
<td>253</td>
<td>254</td>
<td>255</td>
</tr>
</tbody>
</table>
<p>The graph entry point is the following:</p>
<pre class="highlight literal-block">
<span></span><span class="n">xf</span><span class="p">::</span><span class="n">dsp</span><span class="p">::</span><span class="n">aie</span><span class="p">::</span><span class="n">blas</span><span class="p">::</span><span class="n">matrix_mult</span><span class="p">::</span><span class="n">matrix_mult_graph</span>
</pre>
<p>Find a full list of descriptions and parameters in the <a class="reference internal" href="api-reference.html#api-reference"><span class="std std-ref">API Reference Overview</span></a>.</p>
<p>Connections to the cascade ports can be made as follows:</p>
<pre class="highlight literal-block">
<span></span><span class="k">for</span> <span class="p">(</span><span class="nb">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span> <span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">P_CASC_LEN</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">connect</span><span class="o">&lt;&gt;</span><span class="p">(</span><span class="n">inA</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">mmultGraph</span><span class="o">.</span><span class="n">inA</span><span class="p">[</span><span class="n">i</span><span class="p">]);</span>
    <span class="n">connect</span><span class="o">&lt;&gt;</span><span class="p">(</span><span class="n">inB</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">mmultGraph</span><span class="o">.</span><span class="n">inB</span><span class="p">[</span><span class="n">i</span><span class="p">]);</span>
<span class="p">}</span>
<span class="n">connect</span><span class="o">&lt;&gt;</span><span class="p">(</span><span class="n">mmultGraph</span><span class="o">.</span><span class="n">out</span><span class="p">,</span> <span class="n">out</span><span class="p">);</span>
</pre>
</div>
<div class="section" id="widgets">
<span id="id4"></span><h2>Widgets<a class="headerlink" href="#widgets" title="Permalink to this headline">¶</a></h2>
<div class="section" id="widget-api-cast">
<h3>Widget API Cast<a class="headerlink" href="#widget-api-cast" title="Permalink to this headline">¶</a></h3>
<p>The DSPLib contains a Widget API Cast solution, which provides flexibilty when connecting other kernels. This component is able to change the stream interface to window interface and vice-versa. It may be configured to read two input stream interfaces and interleave data onto an output window interface. In addition, multiple copies of output window may be configured to allow extra flexibility when connecting to further kernels.</p>
<p><em>Table 12</em>: Widget API Cast Parameters</p>
<table border="1" class="docutils">
<colgroup>
<col width="26%" />
<col width="18%" />
<col width="37%" />
<col width="18%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head"><strong>Name</strong></th>
<th class="head"><strong>Type</strong></th>
<th class="head">Description</th>
<th class="head"><strong>Range</strong></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>TT_DATA</td>
<td>Typename</td>
<td>Data Type</td>
<td>int16,
cint16,
int32,
cint32,
float,
cfloat</td>
</tr>
<tr class="row-odd"><td>TP_IN_API</td>
<td>Unsigned
int</td>
<td>The input
interface type</td>
<td><p class="first">0 = window,</p>
<p class="last">1 = stream</p>
</td>
</tr>
<tr class="row-even"><td>TP_OUT_API</td>
<td>Typename
int</td>
<td>The output
interface type</td>
<td><p class="first">0 = window,</p>
<p class="last">1 = stream</p>
</td>
</tr>
<tr class="row-odd"><td>TP_NUM_INPUTS</td>
<td>Unsigned
int</td>
<td>The number of
input stream
interfaces
to be
processed</td>
<td>1 - 2</td>
</tr>
<tr class="row-even"><td>TP_WINDOW_VSIZE</td>
<td>Unsigned
int</td>
<td>The number
of samples
in the input
window</td>
<td><p class="first">Must be a
multiple of
the number
of lanes
used
(typically
4 or 8).</p>
<p class="last">No enforced
range, but
large
windows
will result
in mapper
errors due
to
excessive
RAM use.</p>
</td>
</tr>
<tr class="row-odd"><td>TP_NUM_OUTPUT_CLONES</td>
<td>Unsigned
int</td>
<td>The number
of output
window
ports to write
the input data
to.</td>
<td>1 - 4</td>
</tr>
<tr class="row-even"><td>TP_PATTERN</td>
<td>Unsigned
int</td>
<td>The pattern of interleave
by which samples from each
of 2 streams are arranged
into the destination window,
or from the input window
to dual output streams.</td>
<td>0 - 2</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The number of lanes is the number of data elements that are being processed in parallel. This varies depending on the data type (i.e., number of bits in each element) and the register or bus width.</p>
</div>
<p>The graph entry point is the following:</p>
<pre class="highlight literal-block">
<span></span><span class="n">xf</span><span class="p">::</span><span class="n">dsp</span><span class="p">::</span><span class="n">aie</span><span class="p">::</span><span class="n">widget</span><span class="p">::</span><span class="n">api_cast</span><span class="p">::</span><span class="n">widget_api_cast_graph</span>
</pre>
</div>
<div class="section" id="widget-real-to-complex">
<h3>Widget Real to Complex<a class="headerlink" href="#widget-real-to-complex" title="Permalink to this headline">¶</a></h3>
<p>The DSPLib contains a Widget Real to Complex solution, which provides a utility to convert real data to complex or vice versa.</p>
<p><em>Table 13</em>: Widget Real to Complex Parameters</p>
<table border="1" class="docutils">
<colgroup>
<col width="26%" />
<col width="25%" />
<col width="25%" />
<col width="25%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head"><strong>Name</strong></th>
<th class="head"><strong>Type</strong></th>
<th class="head">Description</th>
<th class="head"><strong>Range</strong></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>TT_DATA</td>
<td>Typename</td>
<td>Data Type</td>
<td>int16,
cint16,
int32,
cint32,
float,
cfloat</td>
</tr>
<tr class="row-odd"><td>TT_OUT_DATA</td>
<td>Typename</td>
<td>Data Type</td>
<td>int16,
cint16,
int32,
cint32,
float,
cfloat</td>
</tr>
<tr class="row-even"><td>TP_WINDOW_VSIZE</td>
<td>Unsigned
int</td>
<td>The number
of samples
in the input
window</td>
<td><p class="first">Must be a
multiple of
the number
of lanes
used
(typically
4 or 8).</p>
<p class="last">No enforced
range, but
large
windows
will result
in mapper
errors due
to
excessive
RAM use.</p>
</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The number of lanes is the number of data elements that are being processed in parallel. This varies depending on the data type (i.e., number of bits in each element) and the register or bus width.</p>
</div>
<p>The graph entry point is the following:</p>
<pre class="highlight literal-block">
<span></span><span class="n">xf</span><span class="p">::</span><span class="n">dsp</span><span class="p">::</span><span class="n">aie</span><span class="p">::</span><span class="n">widget</span><span class="p">::</span><span class="n">api_cast</span><span class="p">::</span><span class="n">widget_api_cast_graph</span>
</pre>
</div>
</div>
<div class="section" id="dds-mixer">
<span id="id5"></span><h2>DDS / Mixer<a class="headerlink" href="#dds-mixer" title="Permalink to this headline">¶</a></h2>
<p>The DSPLib contains a DDS and Mixer solution.</p>
<p>In DDS Only mode, there is a single output port that contains the sin/cosine components corresponding to the programmed phase increment. The phase increment is a fixed uint32 value provided as a constructor argument, where 2^31 corresponds to Pi (180 degrees phase increment). The number of samples sent through the output port is determined by the TP_INPUT_WINDOW_SIZE parameter. The output port can be a window interface or a stream interface depending on the use of TP_API.</p>
<p>Mixer inputs are enabled with the TP_MIXER_MODE template parameter. There are two modes that have the mixer functionality enabled. In MIXER_MODE_1, a single input port is exposed and the input samples are complex multiplied by the DDS output for the given phase increment. In MIXER_MODE_2, two input ports are exposed for multi-carrier operation, with the first behaving as in MIXER_MODE_1, and the second input port getting complex multiplied with the complex conjugate of the DDS signal then accumulated to the result of the first complex multiply operation.</p>
<p><em>Table 14</em>: DDS / Mixer Parameters</p>
<table border="1" class="docutils">
<colgroup>
<col width="28%" />
<col width="20%" />
<col width="20%" />
<col width="32%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head"><strong>Name</strong></th>
<th class="head"><strong>Type</strong></th>
<th class="head">Description</th>
<th class="head"><strong>Range</strong></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>TT_DATA</td>
<td>Typename</td>
<td>Data Type</td>
<td>cint16</td>
</tr>
<tr class="row-odd"><td>TP_INPUT_WINDOW_VSIZE</td>
<td>Unsigned
int</td>
<td>The number
of samples
to process
each iteration</td>
<td><p class="first">Must be a multiple of
the number of lanes
used (typically 4
or 8).</p>
<p class="last">No enforced
range, but large
windows will result in
mapper errors due to
excessive RAM use.</p>
</td>
</tr>
<tr class="row-even"><td>TP_MIXER_MODE</td>
<td>Unsigned
int</td>
<td>Mode of
operation</td>
<td><p class="first">0 = DDS Only</p>
<p>1 = Single input mixer</p>
<p class="last">2 = Two input mixer</p>
</td>
</tr>
<tr class="row-odd"><td>TP_API</td>
<td>Unsigned
int</td>
<td>I/O interface
port type</td>
<td><p class="first">0 = Window</p>
<p class="last">1 = Stream</p>
</td>
</tr>
</tbody>
</table>
</div>
</div>


           </div>
           
          </div>
          <footer>
<!-- Atalwar: Moved the footer code to layout.html to resolve conflict with the Xilinx template -->
</footer>

        </div>
      </div>


	  <!-- Sphinx Page Footer block -->
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="compiling-and-simulating.html" class="btn btn-neutral float-right" title="Compiling and Simulating Using the Makefile" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="introduction.html" class="btn btn-neutral float-left" title="Introduction" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo" class="copyright">
    <p class="footerinfo">

    </p>
	<br>
  </div>
      </div>
    </section>


  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

   <script type="text/javascript">
    jQuery(function() { Search.loadIndex("searchindex.js"); });
  </script>

  <script type="text/javascript" id="searchindexloader"></script>


  
  
    
  



  <!--  Xilinx template footer block -->
							</div>
						</div>
					</div>
				</div>
				<div class="xilinxExperienceFragments experiencefragment aem-GridColumn--default--none aem-GridColumn aem-GridColumn--offset--default--0 aem-GridColumn--default--16">
					<div class="xf-content-height">
						<div class="aem-Grid aem-Grid--16 aem-Grid--default--16 ">
							<div class="footer parbase aem-GridColumn--default--none aem-GridColumn aem-GridColumn--offset--default--0 aem-GridColumn--default--16">
								<noindex>
                  <!-- make footer fixed - NileshP -->
                  <style>
                        .footer {
                        position: fixed;
                        left: 0;
                        bottom: 0;
                        width: 100%;
                        }
                  </style>
                  <!-- make footer fixed NileshP-->
									<footer>
										<div class="aem-Grid aem-Grid--16">
											<div class="aem-GridColumn aem-GridColumn--xxxlarge--none aem-GridColumn--xsmall--16 aem-GridColumn--offset--xsmall--0 aem-GridColumn--xlarge--none aem-GridColumn--xxlarge--none aem-GridColumn--default--none aem-GridColumn--offset--large--1 aem-GridColumn--xlarge--12 aem-GridColumn--offset--default--0 aem-GridColumn--xxlarge--10 aem-GridColumn--offset--xlarge--2 aem-GridColumn--offset--xxlarge--3 aem-GridColumn--offset--xxxlarge--4 aem-GridColumn--xsmall--none aem-GridColumn--large--none aem-GridColumn aem-GridColumn--large--14 aem-GridColumn--xxxlarge--8 aem-GridColumn--default--16">
												<div class="container-fluid sub-footer">
													<div class="row">
														<div class="footerSocial parbase">
															<div class="col-md-push-6 col-lg-push-6 col-md-6 col-lg-6">
																<ul class="list-inline pull-right social-menu">
																	<li>
																		<a href="https://www.linkedin.com/company/xilinx">
																		<span class="linkedin icon"></span>
																		<span class="sr-only">Connect on LinkedIn</span>
																		</a>
																	</li>
																	<li>
																		<a href="https://www.twitter.com/XilinxInc">
																		<span class="twitter icon"></span>
																		<span class="sr-only">Follow us on Twitter</span>
																		</a>
																	</li>
																	<li>
																		<a href="https://www.facebook.com/XilinxInc">
																		<span class="facebook icon"></span>
																		<span class="sr-only">Connect on Facebook</span>
																		</a>
																	</li>
																	<li>
																		<a href="https://www.youtube.com/XilinxInc">
																		<span class="youtube icon"></span>
																		<span class="sr-only">Watch us on YouTube</span>
																		</a>
																	</li>
																	<li>
																		<a href="https://www.xilinx.com/registration/subscriber-signup.html">
																		<span class="newsletter icon"></span>
																		<span class="sr-only">Subscribe to Newsletter</span>
																		</a>
																	</li>
																</ul>
															</div>
														</div>
														<div class="col-md-pull-6 col-lg-pull-6 col-md-6 col-lg-6">
															<span class="copyright">
                                  
                                  &copy; 2019-2021, Xilinx Inc.
                              </span>
															<ul class="list-inline sub-menu">
																<li>
																	<a href="https://www.xilinx.com/about/privacy-policy.html">Privacy</a>
																</li>
																<li>
																	<a href="https://www.xilinx.com/about/legal.html">Legal</a>
																</li>
																<li>
																	<a href="https://www.xilinx.com/about/contact.html">Contact</a>
																</li>
															</ul>
														</div>
													</div>
												</div>
											</div>
										</div>
									</footer>
								</noindex>
							</div>
						</div>
					</div>
				</div>
				<div class="quicklinks parbase aem-GridColumn--default--none aem-GridColumn aem-GridColumn--offset--default--0 aem-GridColumn--default--16">
					<noindex>
						<span class="quickLinks">
							<ul>
								<li>
									<a href="#top" class="btn backToTop">
									<span class="fas fa-angle-up" aria-hidden="true"></span>
									</a>
								</li>
							</ul>
						</span>
					</noindex>
				</div>
			</div>
		</div>
		<script>window.CQ = window.CQ || {}</script>
		<script src="https://static.cloud.coveo.com/searchui/v2.4382/js/CoveoJsSearch.Lazy.min.js"></script>
		<script>
			var underscoreSetup = function () {
			  _.templateSettings.interpolate = /\{\{=([^-][\S\s]+?)\}\}/g;
			  _.templateSettings.evaluate = /\{\{([^-=][\S\s]+?)\}\}/g;
			  _.templateSettings.escape = /\{\{-([^=][\S\s]+?)\}\}/g;
			}

			underscoreSetup();
		</script>
	</body>
</html>



<!DOCTYPE HTML>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
	<head>
		<meta charset="utf-8">
		<meta content="Vitis, Database, Vitis Database Library, Alveo" name="keywords" />
<meta content="Vitis Database Library is an open-sourced Vitis library written in C++ for accelerating database applications in a variety of use cases." name="description" />
<meta content="Document" name="xlnxdocumentclass" />
<meta content="Tutorials" name="xlnxdocumenttype" />

		<meta http-equiv="content-type" content="text/html; charset=UTF-8"/>
		<link rel="stylesheet" href="https://static.cloud.coveo.com/searchui/v2.4382/css/CoveoFullSearch.css"/>
		<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
		<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
		<meta name="description"/>
		<meta name="keywords"/>
		<meta property="og:title" content=""/>
		<meta property="og:description"/>
		<!-- favicon -->
		<link rel="icon" type="image/vnd.microsoft.icon" href="_static/favicon.ico"/>
		<link rel="shortcut icon" type="image/vnd.microsoft.icon" href="_static/favicon.ico"/>
		<!-- Fonts -->
		<link href="https://fonts.googleapis.com/css?family=Roboto:300,400,500" rel="stylesheet" type="text/css"/>

	<!-- OneTrust Cookies Consent Notice start for xilinx.github.io -->
<script src="https://cdn.cookielaw.org/scripttemplates/otSDKStub.js" data-document-language="true" type="text/javascript" charset="UTF-8" data-domain-script="37701bd4-e5c0-4ee3-9329-e7475d0b13a7" ></script>
<script type="text/javascript">
function OptanonWrapper() { }
</script>
<!-- OneTrust Cookies Consent Notice end for xilinx.github.io -->
		<!-- Google Tag Manager -->
	<script type="text/plain" class="optanon-category-C0002">(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
	new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
	j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
	'//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
	})(window,document,'script','dataLayer','GTM-5RHQV7');</script>
	<!-- End Google Tag Manager -->
	
        <!-- Google Tag Manager -->
        <noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-5RHQV7" height="0" width="0" style="display:none;visibility:hidden" class="optanon-category-C0002"></iframe></noscript>
        <!-- End Google Tag Manager -->	

  
  
  
  

  
      <script type="text/javascript" src="_static/js/jquery.min.js"></script>
	  <script type="text/javascript" src="_static/js/gtm.js"></script>
  <script type="text/javascript" src="_static/js/modernizr.min.js"></script>
    <script type="text/javascript" src="_static/js/d3dd8c60ed.js"></script>
    <script type="text/javascript" src="_static/js/common-ui-all.min.js"></script>
    <script type="text/javascript" src="_static/js/jquery-ui.min.js"></script>
    <script type="text/javascript" src="_static/js/CoveoJsSearch.Lazy.min.js"></script>
    <script type="text/javascript" src="_static/js/linkid.js"></script>
    <script type="text/javascript" src="_static/js/Searchbox.min.js"></script>
    <script type="text/javascript" src="_static/js/header-footer.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script type="text/javascript" src="_static/jquery.js"></script>
        <script type="text/javascript" src="_static/underscore.js"></script>
        <script type="text/javascript" src="_static/doctools.js"></script>
        <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/css/common-ui-all.min.css" type="text/css" />
  <link rel="stylesheet" href="_static/css/header-footer.min.css" type="text/css" />
  <link rel="stylesheet" href="_static/css/pro.min.css" media="all" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="API Document" href="guide_L1/api.html" />
    <link rel="prev" title="Release Note" href="release.html" /> 
	</head>
	<body>
		<div class="xilinx-bs3"/>
		<div class="root responsivegrid">
			<div class="aem-Grid aem-Grid--16 aem-Grid--default--16 aem-Grid--large--16 aem-Grid--xlarge--16 aem-Grid--xxlarge--16 aem-Grid--xxxlarge--16 ">
 <div class="xilinxExperienceFragments experiencefragment aem-GridColumn aem-GridColumn--default--12">

    
    

    



<div class="xf-content-height">
    

<div class="aem-Grid aem-Grid--16 aem-Grid--default--16 ">
    
    <div class="header parbase aem-GridColumn aem-GridColumn--default--12"><noindex>
	<header data-component="header" class="site-header">
		<nav class="navbar navbar-default">
			<div class="container-fluid main-nav">
				<div class="row">
					<div class="navbar-column col-xs-4 col-sm-5">
						<ul class="nav navbar-nav hidden-xs">
							<li>
									<button onclick="window.location.href=&#39;https://www.xilinx.com/applications.html&#39;;">Solutions</button>
								</li>
							<li>
									<button onclick="window.location.href=&#39;https://www.xilinx.com/products/silicon-devices.html&#39;;">Products</button>
								</li>
							<li>
									<button onclick="window.location.href=&#39;https://www.xilinx.com/about/company-overview.html&#39;;">Company</button>
								</li>
							</ul>
							
						<ul class="nav navbar-nav hidden-sm hidden-md hidden-lg">
							<li>
									<button data-target="#header-container-0" data-function="toggle">Solutions</button>
								</li>
							<li>
									<button data-target="#header-container-1" data-function="toggle">Products</button>
								</li>
							<li>
									<button data-target="#header-container-2" data-function="toggle">Company</button>
								</li>
							</ul>
							
						<div id="header-container-0" class="menu-container">
								<div class="navbar-nav-container">
									<ul class="nav navbar-nav">
										<li>
												<button onclick="window.location.href=&#39;https://www.xilinx.com/applications.html&#39;;">Solutions</button>
												</li>
										<li>
												<button onclick="window.location.href=&#39;https://www.xilinx.com/products/silicon-devices.html&#39;;">Products</button>
												</li>
										<li>
												<button onclick="window.location.href=&#39;https://www.xilinx.com/about/company-overview.html&#39;;">Company</button>
												</li>
										</ul>
									<button data-function="close-menu">
										<span class="fal fa-times" aria-hidden="true"></span>
									</button>
								</div>
							</div>
							<div id="header-container-1" class="menu-container">
								<div class="navbar-nav-container">
									<ul class="nav navbar-nav">
										<li>
												<button onclick="window.location.href=&#39;https://www.xilinx.com/applications.html&#39;;">Solutions</button>
												</li>
										<li>
												<button onclick="window.location.href=&#39;https://www.xilinx.com/products/silicon-devices.html&#39;;">Products</button>
												</li>
										<li>
												<button onclick="window.location.href=&#39;https://www.xilinx.com/about/company-overview.html&#39;;">Company</button>
												</li>
										</ul>
									<button data-function="close-menu">
										<span class="fal fa-times" aria-hidden="true"></span>
									</button>
								</div>
							</div>
							<div id="header-container-2" class="menu-container">
								<div class="navbar-nav-container">
									<ul class="nav navbar-nav">
										<li>
												<button onclick="window.location.href=&#39;https://www.xilinx.com/applications.html&#39;;">Solutions</button>
												</li>
										<li>
												<button onclick="window.location.href=&#39;https://www.xilinx.com/products/silicon-devices.html&#39;;">Products</button>
												</li>
										<li>
												<button onclick="window.location.href=&#39;https://www.xilinx.com/about/company-overview.html&#39;;">Company</button>
												</li>
										</ul>
									<button data-function="close-menu">
										<span class="fal fa-times" aria-hidden="true"></span>
									</button>
								</div>
							</div>
							</div>
					<div class="logo-column col-xs-4 col-sm-2">
						<div class="logo">
							<a target="_blank" href="https://www.xilinx.com/">
								<img src="https://github.com/Xilinx/Image-Collateral/blob/main/xilinx-header-logo.svg?raw=true" title="Xilinx Inc"/>
							</a>
						</div>
					</div>

				</div>
			</div>
			</nav></header></noindex></div>
		
	
</div>

    
</div>
</div>

<div class="calloutBanner parbase aem-GridColumn--default--none aem-GridColumn aem-GridColumn--offset--default--0 aem-GridColumn--default--16"><div class="callout-banner">
    Xilinx is now a part of <a target="_blank" href="https://www.amd.com/en/corporate/xilinx-acquisition">AMD</a> |  <a target="_blank" href="https://www.amd.com/en/corporate/privacy">Learn More</a>
</div>
</div>
				<div class="parsys aem-GridColumn--xxxlarge--none aem-GridColumn--xlarge--none aem-GridColumn--xxlarge--none aem-GridColumn--default--none aem-GridColumn--offset--large--1 aem-GridColumn--xlarge--12 aem-GridColumn--offset--default--0 aem-GridColumn--xxlarge--10 aem-GridColumn--offset--xlarge--2 aem-GridColumn--offset--xxlarge--3 aem-GridColumn--offset--xxxlarge--4 aem-GridColumn--large--none aem-GridColumn aem-GridColumn--large--14 aem-GridColumn--xxxlarge--8 aem-GridColumn--default--16">
						<div class="container-fluid">
							<div class="row">
							<div class="col-xs-12">
   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home" alt="Documentation Home"> Vitis Graph Library
          

          
          </a>

          
            
            
              <div class="version">
                2021.2
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

      
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
            
            
            
              
            
            
              <p class="caption"><span class="caption-text">Library Overview</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="overview.html">Requirements</a></li>
<li class="toctree-l1"><a class="reference internal" href="overview.html#license">License</a></li>
<li class="toctree-l1"><a class="reference internal" href="overview.html#trademark-notice">Trademark Notice</a></li>
<li class="toctree-l1"><a class="reference internal" href="release.html">Release Note</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Vitis Graph Library Tutorial</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#get-and-run-the-vitis-graph-library">Get and Run the Vitis Graph Library</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#get-the-dependencies">Get the Dependencies</a></li>
<li class="toctree-l3"><a class="reference internal" href="#setup-environment">Setup Environment</a></li>
<li class="toctree-l3"><a class="reference internal" href="#download-the-vitis-graph-library">Download the Vitis Graph Library</a></li>
<li class="toctree-l3"><a class="reference internal" href="#run-a-l3-example">Run a L3 Example</a></li>
<li class="toctree-l3"><a class="reference internal" href="#run-a-l2-example">Run a L2 Example</a></li>
<li class="toctree-l3"><a class="reference internal" href="#run-a-l1-example">Run a L1 Example</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#how-vitis-graph-library-works">How Vitis Graph Library Works</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#l3-api">L3 API</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#target-audience">Target Audience</a></li>
<li class="toctree-l4"><a class="reference internal" href="#example-usage">Example Usage</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#l2-api">L2 API</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id5">Target Audience</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id6">Example Usage</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#l1-api">L1 API</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id8">Target Audience</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<p class="caption"><span class="caption-text">L1 User Guide</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="guide_L1/api.html">API Document</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="guide_L1/internals.html">Design Internals</a></li>
</ul>
<p class="caption"><span class="caption-text">L2 User Guide</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="guide_L2/api.html">API Document</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="guide_L2/internals.html">Design Internals</a></li>
</ul>
<p class="caption"><span class="caption-text">L3 User Guide</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="guide_L3/utilization_L3.html">User Guide</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="guide_L3/api.html">API Document</a></li>
</ul>
<p class="caption"><span class="caption-text">TigerGraph Plugin</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="plugin/tigergraph_integration.html">TigerGraph Integration</a></li>
</ul>
<p class="caption"><span class="caption-text">Benchmark</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="benchmark.html">Benchmark</a></li>
</ul>

            
			
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Vitis Graph Library</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>Vitis Graph Library Tutorial</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="vitis-graph-library-tutorial">
<span id="brief"></span><h1>Vitis Graph Library Tutorial<a class="headerlink" href="#vitis-graph-library-tutorial" title="Permalink to this headline">¶</a></h1>
<div class="section" id="get-and-run-the-vitis-graph-library">
<h2>Get and Run the Vitis Graph Library<a class="headerlink" href="#get-and-run-the-vitis-graph-library" title="Permalink to this headline">¶</a></h2>
<div class="section" id="get-the-dependencies">
<h3>Get the Dependencies<a class="headerlink" href="#get-the-dependencies" title="Permalink to this headline">¶</a></h3>
<div class="line-block">
<div class="line"><a class="reference external" href="https://www.xilinx.com/products/design-tools/vitis/vitis-platform.html">Vitis</a>, Instructions to install Vitis can be found <a class="reference external" href="https://docs.xilinx.com/r/en-US/ug1393-vitis-application-acceleration/Installation">here</a>.</div>
<div class="line"><a class="reference external" href="https://www.xilinx.com/support/download/index.html/content/xilinx/en/downloadNav/alveo/u50.html">Alveo U50 packages</a>, Instructions to deploy Alveo U50 can be found <a class="reference external" href="https://www.xilinx.com/support/documentation/boards_and_kits/accelerator-cards/1_8/ug1370-u50-installation.pdf">here</a>.</div>
<div class="line"><a class="reference external" href="https://github.com/Xilinx/XRM">XRM</a> (Optional, only for L3 use cases), Instructions to install XRM can be found <a class="reference external" href="https://xilinx.github.io/XRM/Build.html">here</a>.</div>
</div>
</div>
<div class="section" id="setup-environment">
<h3>Setup Environment<a class="headerlink" href="#setup-environment" title="Permalink to this headline">¶</a></h3>
<pre class="highlight literal-block">
<span></span><span class="ch">#!/bin/bash</span>
<span class="nb">source</span> &lt;Vitis_install_path&gt;/Vitis/2022.1/settings64.sh
<span class="nb">source</span> /opt/xilinx/xrt/setup.sh
<span class="nb">export</span> <span class="nv">PLATFORM_REPO_PATHS</span><span class="o">=</span>&lt;path to platforms&gt;
<span class="nb">export</span> <span class="nv">DEVICE</span><span class="o">=</span>xilinx_u50_gen3x16_xdma_5_202210_1
<span class="nb">export</span> <span class="nv">TARGET</span><span class="o">=</span>sw_emu
</pre>
<p>Note: The TARGET environment variable can be set as sw_emu, hw_emu and hw according to which emulation mode is expected to run.
sw_emu is for C level emulations. hw_emu is for RTL level emulations. hw is for real on-board test. For more information about the Vitis Target please have a look at <a class="reference external" href="https://docs.xilinx.com/r/en-US/ug1393-vitis-application-acceleration/Build-Targets?tocId=8ijg9En3MQ_7CJBZrUFENw">here</a>.</p>
</div>
<div class="section" id="download-the-vitis-graph-library">
<h3>Download the Vitis Graph Library<a class="headerlink" href="#download-the-vitis-graph-library" title="Permalink to this headline">¶</a></h3>
<pre class="highlight literal-block">
<span></span><span class="ch">#!/bin/bash</span>
git clone https://github.com/Xilinx/Vitis_Libraries.git
<span class="nb">cd</span> Vitis_Libraries/graph
</pre>
</div>
<div class="section" id="run-a-l3-example">
<h3>Run a L3 Example<a class="headerlink" href="#run-a-l3-example" title="Permalink to this headline">¶</a></h3>
<pre class="highlight literal-block">
<span></span><span class="ch">#!/bin/bash</span>
<span class="nb">cd</span> L3/tests/SSSP  <span class="c1"># SSSP is an example case. Please change directory to any other cases in L3/test if interested.</span>
make <span class="nb">help</span>         <span class="c1"># show available make command</span>
make host         <span class="c1"># build the binary running on host</span>
make build        <span class="c1"># build the binary running on Alveo</span>
make run          <span class="c1"># run the entire program</span>
make cleanall
</pre>
<p>For more explanation on L3 cases please have a read on <a class="reference internal" href="#tutorial-l3"><span class="std std-ref">L3 API</span></a>.</p>
</div>
<div class="section" id="run-a-l2-example">
<h3>Run a L2 Example<a class="headerlink" href="#run-a-l2-example" title="Permalink to this headline">¶</a></h3>
<pre class="highlight literal-block">
<span></span><span class="ch">#!/bin/bash</span>
<span class="nb">cd</span> L2/tests/shortest_path_float_pred   <span class="c1"># shortest_path_float_pred is an example case. Please change directory to any other cases in L2/test if interested.</span>
make <span class="nb">help</span>                              <span class="c1"># show available make command</span>
make host                              <span class="c1"># build the binary running on host</span>
make build                             <span class="c1"># build the binary running on Alveo</span>
make run                               <span class="c1"># run the entire program</span>
make cleanall
</pre>
<p>For more explanation on L2 cases please have a read on <a class="reference internal" href="#tutorial-l2"><span class="std std-ref">L2 API</span></a>.</p>
</div>
<div class="section" id="run-a-l1-example">
<h3>Run a L1 Example<a class="headerlink" href="#run-a-l1-example" title="Permalink to this headline">¶</a></h3>
<pre class="highlight literal-block">
<span></span><span class="ch">#!/bin/bash</span>
<span class="nb">cd</span> L1/tests/hw/dense_similarity_int    <span class="c1"># dense_similarity_int is an example case. Please change directory to any other cases in L1/test if interested</span>
make <span class="nb">help</span>                              <span class="c1"># show available make command</span>
make run <span class="nv">CSIM</span><span class="o">=</span><span class="m">1</span>                        <span class="c1"># run C level simulation of the HLS code</span>
make run <span class="nv">CSYNTH</span><span class="o">=</span><span class="m">1</span> <span class="nv">COSIM</span><span class="o">=</span><span class="m">1</span>              <span class="c1"># run RTL level simulation of the HLS code</span>
make cleanall
</pre>
<p>For more explanation on L1 cases please have a read on <a class="reference internal" href="#tutorial-l1"><span class="std std-ref">L1 API</span></a>.</p>
</div>
</div>
<div class="section" id="how-vitis-graph-library-works">
<h2>How Vitis Graph Library Works<a class="headerlink" href="#how-vitis-graph-library-works" title="Permalink to this headline">¶</a></h2>
<p>Vitis Graph Library aims to provide reference <a class="reference external" href="https://www.xilinx.com/products/design-tools/vitis/vitis-platform.html">Vitis</a>
implementations for a set of graph processing algorithms which fits the <a class="reference external" href="https://www.xilinx.com/products/boards-and-kits/alveo.html">Xilinx Alveo Series</a>
acceleration cards. The API in Vitis Graph Library has been classified into three layers, namely L1/L2/L3. Each targets to serve different audience.</p>
<ul class="simple">
<li>L3 APIs locate at <code class="docutils literal notranslate"><span class="pre">Vitis_Libraries/graph/L3/include</span></code>. Pure software APIs are prodived to customers who want a fast deployment of graph processing algorithms on Alveo Cards. It provides a series of software designs to efficiently make use of resources in Alveo cards and deliver high performance graph processing.</li>
<li>L2 APIs locate at <code class="docutils literal notranslate"><span class="pre">Vitis_Libraries/graph/L2/include</span></code>. They are a number of compute-unit designs running on Alveo cards. It provides a set of compute-unit designs implemented in HLS codes. These L2 APIs needs be compiled as OpenCL kernels and will be called by OpenCL APIs.</li>
<li>L1 APIs locate at <code class="docutils literal notranslate"><span class="pre">Vitis_Libraries/graph/L1/include</span></code>. They are basic components that will be used to compose compute-units. The L1 APIs are all well-optimized HLS design and are able to fit into various resource constraints.</li>
</ul>
<div class="section" id="l3-api">
<span id="tutorial-l3"></span><h3>L3 API<a class="headerlink" href="#l3-api" title="Permalink to this headline">¶</a></h3>
<div class="section" id="target-audience">
<h4>Target Audience<a class="headerlink" href="#target-audience" title="Permalink to this headline">¶</a></h4>
<p>If a fast deployment of FPGA accelerated graph processor is required, then the Vitis Graph L3 APIs would be the best choice. Pre-designed and well-optimized Vitis compute units are provided in these APIs. And efficient software management of resources is also included in these APIs. To deploy graph accelerators, all users need to do is just a simple call of these c++ L3 APIs.</p>
</div>
<div class="section" id="example-usage">
<h4>Example Usage<a class="headerlink" href="#example-usage" title="Permalink to this headline">¶</a></h4>
<p>Please run the following codes to build the library (Do not forget to install XRT/XRM and setup the environment):</p>
<pre class="highlight literal-block">
<span></span><span class="ch">#!/bin/bash</span>
<span class="nb">cd</span> Vitis_Libraries/L3/lib
make libgraphL3
<span class="nb">export</span> <span class="nv">LD_LIBRARY_PATH</span><span class="o">=</span>&lt;PATH TO YOUR Vitis_Libraries/L3/lib&gt;:<span class="nv">$LD_LIBRARY_PATH</span>
</pre>
<p>To make use of the L3/APIs, please include <code class="docutils literal notranslate"><span class="pre">Vitis_Libraries/L3/include</span></code> path and link <code class="docutils literal notranslate"><span class="pre">Vitis_Libraries/L3/lib</span></code> path when compiling the code.</p>
<p>The following steps are usually required to make a call of the L3 APIs:</p>
<ol class="arabic simple">
<li>Setup the handle</li>
</ol>
<pre class="highlight literal-block">
<span></span><span class="n">xf</span><span class="o">::</span><span class="n">graph</span><span class="o">::</span><span class="n">L3</span><span class="o">::</span><span class="n">Handle</span><span class="o">::</span><span class="n">singleOP</span> <span class="n">op0</span><span class="p">;</span>   <span class="c1">// create a configuration of operation (such as shortest path, wcc)</span>
<span class="n">op0</span><span class="p">.</span><span class="n">operationName</span> <span class="o">=</span> <span class="s">&quot;shortestPathFloat&quot;</span><span class="p">;</span>

<span class="n">xf</span><span class="o">::</span><span class="n">graph</span><span class="o">::</span><span class="n">L3</span><span class="o">::</span><span class="n">Handle</span> <span class="n">handle0</span><span class="p">;</span>
<span class="n">handle0</span><span class="p">.</span><span class="n">addOp</span><span class="p">(</span><span class="n">op0</span><span class="p">);</span>  <span class="c1">// initialize the Alveo board with the required operation, may have more than one kind of operation</span>
<span class="n">handle0</span><span class="p">.</span><span class="n">setUp</span><span class="p">();</span>     <span class="c1">// Download binaries to FPGAs</span>
</pre>
<ol class="arabic simple" start="2">
<li>Setup and Deploy the Graph</li>
</ol>
<pre class="highlight literal-block">
<span></span><span class="n">xf</span><span class="o">::</span><span class="n">graph</span><span class="o">::</span><span class="n">Graph</span><span class="o">&lt;</span><span class="kt">uint32_t</span><span class="p">,</span> <span class="n">DT</span><span class="o">&gt;</span> <span class="n">g</span><span class="p">(</span><span class="s">&quot;CSR&quot;</span><span class="p">,</span> <span class="n">numVertices</span><span class="p">,</span> <span class="n">numEdges</span><span class="p">,</span> <span class="n">offsetsCSR</span><span class="p">,</span> <span class="n">indicesCSR</span><span class="p">,</span> <span class="n">weightsCSR</span><span class="p">);</span> <span class="c1">// Create the graph</span>
<span class="p">(</span><span class="n">handle0</span><span class="p">.</span><span class="n">opsp</span><span class="p">)</span><span class="o">-&gt;</span><span class="n">loadGraph</span><span class="p">(</span><span class="n">g</span><span class="p">);</span> <span class="c1">// Deploy the graph data</span>
</pre>
<ol class="arabic simple" start="3">
<li>Run the required operation</li>
</ol>
<pre class="highlight literal-block">
<span></span><span class="k">auto</span> <span class="n">ev</span> <span class="o">=</span> <span class="n">xf</span><span class="o">::</span><span class="n">graph</span><span class="o">::</span><span class="n">L3</span><span class="o">::</span><span class="n">shortestPath</span><span class="p">(</span><span class="n">handle0</span><span class="p">,</span> <span class="n">nSource</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">sourceID</span><span class="p">,</span> <span class="n">weighted</span><span class="p">,</span> <span class="n">g</span><span class="p">,</span> <span class="n">result</span><span class="p">,</span> <span class="n">pred</span><span class="p">);</span> <span class="c1">// Run the operation, this is a non-block call, actually start a thread</span>
<span class="kt">int</span> <span class="n">ret</span> <span class="o">=</span> <span class="n">ev</span><span class="p">.</span><span class="n">wait</span><span class="p">();</span> <span class="c1">// wait for the operation to finish</span>
</pre>
<ol class="arabic simple" start="4">
<li>Release resources</li>
</ol>
<pre class="highlight literal-block">
<span></span><span class="p">(</span><span class="n">handle0</span><span class="p">.</span><span class="n">opsp</span><span class="p">)</span><span class="o">-&gt;</span><span class="n">join</span><span class="p">();</span> <span class="c1">// join the thread</span>
<span class="n">handle0</span><span class="p">.</span><span class="n">free</span><span class="p">();</span> <span class="c1">// release other memories</span>
<span class="n">g</span><span class="p">.</span><span class="n">freeBuffers</span><span class="p">();</span> <span class="c1">// release graph memories</span>
</pre>
</div>
</div>
<div class="section" id="l2-api">
<span id="tutorial-l2"></span><h3>L2 API<a class="headerlink" href="#l2-api" title="Permalink to this headline">¶</a></h3>
<div class="section" id="id5">
<h4>Target Audience<a class="headerlink" href="#id5" title="Permalink to this headline">¶</a></h4>
<p>If a pure FPGA based graph accelerator is required, then the VItis Graph L2 interface might be interested. The L2 APIs provide HLS function that can be directly built into a Vitis compute-unit (OpenCL kernel). The testcases of the L2 APIs can be good references to compile and run the FPGA binaries (xclbins). Simple OpenCL codes are also provided to make use of the generated FPGA binaries. To efficiently management this FPGA binaries and make use of FPGA resources, please take a look at <a class="reference internal" href="#tutorial-l3"><span class="std std-ref">L3 API</span></a>.</p>
</div>
<div class="section" id="id6">
<h4>Example Usage<a class="headerlink" href="#id6" title="Permalink to this headline">¶</a></h4>
<p>The L2 API can be found at <code class="docutils literal notranslate"><span class="pre">Vitis_Libraries/L2/include</span></code>. A typical code for calling L2 APIs may looks like this:</p>
<pre class="highlight literal-block">
<span></span><span class="k">extern</span> <span class="s">&quot;C&quot;</span> <span class="kt">void</span> <span class="n">shortestPath_top</span><span class="p">(</span><span class="n">ap_uint</span><span class="o">&lt;</span><span class="mi">32</span><span class="o">&gt;*</span> <span class="n">config</span><span class="p">,</span>
                                 <span class="n">ap_uint</span><span class="o">&lt;</span><span class="mi">512</span><span class="o">&gt;*</span> <span class="n">offset</span><span class="p">,</span>
                                 <span class="n">ap_uint</span><span class="o">&lt;</span><span class="mi">512</span><span class="o">&gt;*</span> <span class="n">column</span><span class="p">,</span>
                                 <span class="n">ap_uint</span><span class="o">&lt;</span><span class="mi">512</span><span class="o">&gt;*</span> <span class="n">weight</span><span class="p">,</span>

                                 <span class="n">ap_uint</span><span class="o">&lt;</span><span class="mi">512</span><span class="o">&gt;*</span> <span class="n">ddrQue512</span><span class="p">,</span>
                                 <span class="n">ap_uint</span><span class="o">&lt;</span><span class="mi">32</span><span class="o">&gt;*</span> <span class="n">ddrQue</span><span class="p">,</span>

                                 <span class="n">ap_uint</span><span class="o">&lt;</span><span class="mi">512</span><span class="o">&gt;*</span> <span class="n">result512</span><span class="p">,</span>
                                 <span class="n">ap_uint</span><span class="o">&lt;</span><span class="mi">32</span><span class="o">&gt;*</span> <span class="n">result</span><span class="p">,</span>
                                 <span class="n">ap_uint</span><span class="o">&lt;</span><span class="mi">512</span><span class="o">&gt;*</span> <span class="n">pred512</span><span class="p">,</span>
                                 <span class="n">ap_uint</span><span class="o">&lt;</span><span class="mi">32</span><span class="o">&gt;*</span> <span class="n">pred</span><span class="p">,</span>
                                 <span class="n">ap_uint</span><span class="o">&lt;</span><span class="mi">8</span><span class="o">&gt;*</span> <span class="n">info</span><span class="p">)</span> <span class="p">{</span>
   <span class="k">const</span> <span class="kt">int</span> <span class="n">depth_E</span> <span class="o">=</span> <span class="n">E</span><span class="p">;</span>
   <span class="k">const</span> <span class="kt">int</span> <span class="n">depth_V</span> <span class="o">=</span> <span class="n">V</span><span class="p">;</span>

<span class="cp">#pragma HLS INTERFACE m_axi offset = slave latency = 32 num_write_outstanding = 1 num_read_outstanding = \</span>
<span class="cp">   32 max_write_burst_length = 2 max_read_burst_length = 8 bundle = gmem0 port = config depth = 4</span>
<span class="cp">#pragma HLS INTERFACE m_axi offset = slave latency = 32 num_write_outstanding = 1 num_read_outstanding = \</span>
<span class="cp">   32 max_write_burst_length = 2 max_read_burst_length = 8 bundle = gmem0 port = offset depth = depth_V</span>
<span class="cp">#pragma HLS INTERFACE m_axi offset = slave latency = 32 num_write_outstanding = 1 num_read_outstanding = \</span>
<span class="cp">   32 max_write_burst_length = 2 max_read_burst_length = 32 bundle = gmem1 port = column depth = depth_E</span>
<span class="cp">#pragma HLS INTERFACE m_axi offset = slave latency = 32 num_write_outstanding = 1 num_read_outstanding = \</span>
<span class="cp">   32 max_write_burst_length = 2 max_read_burst_length = 32 bundle = gmem2 port = weight depth = depth_E</span>
<span class="cp">#pragma HLS INTERFACE m_axi offset = slave latency = 32 num_write_outstanding = 32 num_read_outstanding = \</span>
<span class="cp">   1 max_write_burst_length = 2 max_read_burst_length = 2 bundle = gmem3 port = ddrQue depth = depth_E*16</span>
<span class="cp">#pragma HLS INTERFACE m_axi offset = slave latency = 32 num_write_outstanding = 32 num_read_outstanding = \</span>
<span class="cp">   1 max_write_burst_length = 2 max_read_burst_length = 2 bundle = gmem3 port = ddrQue512 depth = depth_E</span>
<span class="cp">#pragma HLS INTERFACE m_axi offset = slave latency = 32 num_write_outstanding = 32 num_read_outstanding = \</span>
<span class="cp">   32 max_write_burst_length = 64 max_read_burst_length = 2 bundle = gmem4 port = result512 depth = depth_V</span>
<span class="cp">#pragma HLS INTERFACE m_axi offset = slave latency = 32 num_write_outstanding = 32 num_read_outstanding = \</span>
<span class="cp">   32 max_write_burst_length = 64 max_read_burst_length = 2 bundle = gmem4 port = info depth = 8</span>
<span class="cp">#pragma HLS INTERFACE m_axi offset = slave latency = 32 num_write_outstanding = 32 num_read_outstanding = \</span>
<span class="cp">   32 max_write_burst_length = 64 max_read_burst_length = 2 bundle = gmem4 port = result depth = depth_V*16</span>
<span class="cp">#pragma HLS INTERFACE m_axi offset = slave latency = 32 num_write_outstanding = 32 num_read_outstanding = \</span>
<span class="cp">   1 max_write_burst_length = 64 max_read_burst_length = 2 bundle = gmem5 port = pred512 depth = depth_V</span>
<span class="cp">#pragma HLS INTERFACE m_axi offset = slave latency = 32 num_write_outstanding = 32 num_read_outstanding = \</span>
<span class="cp">   1 max_write_burst_length = 64 max_read_burst_length = 2 bundle = gmem5 port = pred depth = depth_V*16</span>

   <span class="n">xf</span><span class="o">::</span><span class="n">graph</span><span class="o">::</span><span class="n">singleSourceShortestPath</span><span class="o">&lt;</span><span class="mi">32</span><span class="p">,</span> <span class="n">MAXOUTDEGREE</span><span class="o">&gt;</span><span class="p">(</span><span class="n">config</span><span class="p">,</span> <span class="n">offset</span><span class="p">,</span> <span class="n">column</span><span class="p">,</span> <span class="n">weight</span><span class="p">,</span> <span class="n">ddrQue512</span><span class="p">,</span> <span class="n">ddrQue</span><span class="p">,</span> <span class="n">result512</span><span class="p">,</span>
                                                         <span class="n">result</span><span class="p">,</span> <span class="n">pred512</span><span class="p">,</span> <span class="n">pred</span><span class="p">,</span> <span class="n">info</span><span class="p">);</span>
<span class="p">}</span>
</pre>
<p>It is usually a wrapper function of APIs in <code class="docutils literal notranslate"><span class="pre">Vitis_Libraries/L3/lib</span></code>. Something insteresting might be the following code:</p>
<pre class="highlight literal-block">
<span></span><span class="cp">#pragma HLS INTERFACE m_axi offset = slave latency = 32 num_write_outstanding = 1 num_read_outstanding = \</span>
<span class="cp">   32 max_write_burst_length = 2 max_read_burst_length = 8 bundle = gmem0 port = config depth = 4</span>
<span class="cp">#pragma HLS INTERFACE m_axi offset = slave latency = 32 num_write_outstanding = 1 num_read_outstanding = \</span>
<span class="cp">   32 max_write_burst_length = 2 max_read_burst_length = 8 bundle = gmem0 port = offset depth = depth_V</span>
<span class="cp">#pragma HLS INTERFACE m_axi offset = slave latency = 32 num_write_outstanding = 1 num_read_outstanding = \</span>
<span class="cp">   32 max_write_burst_length = 2 max_read_burst_length = 32 bundle = gmem1 port = column depth = depth_E</span>
<span class="cp">#pragma HLS INTERFACE m_axi offset = slave latency = 32 num_write_outstanding = 1 num_read_outstanding = \</span>
<span class="cp">   32 max_write_burst_length = 2 max_read_burst_length = 32 bundle = gmem2 port = weight depth = depth_E</span>
<span class="cp">#pragma HLS INTERFACE m_axi offset = slave latency = 32 num_write_outstanding = 32 num_read_outstanding = \</span>
<span class="cp">   1 max_write_burst_length = 2 max_read_burst_length = 2 bundle = gmem3 port = ddrQue depth = depth_E*16</span>
<span class="cp">#pragma HLS INTERFACE m_axi offset = slave latency = 32 num_write_outstanding = 32 num_read_outstanding = \</span>
<span class="cp">   1 max_write_burst_length = 2 max_read_burst_length = 2 bundle = gmem3 port = ddrQue512 depth = depth_E</span>
<span class="cp">#pragma HLS INTERFACE m_axi offset = slave latency = 32 num_write_outstanding = 32 num_read_outstanding = \</span>
<span class="cp">   32 max_write_burst_length = 64 max_read_burst_length = 2 bundle = gmem4 port = result512 depth = depth_V</span>
<span class="cp">#pragma HLS INTERFACE m_axi offset = slave latency = 32 num_write_outstanding = 32 num_read_outstanding = \</span>
<span class="cp">   32 max_write_burst_length = 64 max_read_burst_length = 2 bundle = gmem4 port = info depth = 8</span>
<span class="cp">#pragma HLS INTERFACE m_axi offset = slave latency = 32 num_write_outstanding = 32 num_read_outstanding = \</span>
<span class="cp">   32 max_write_burst_length = 64 max_read_burst_length = 2 bundle = gmem4 port = result depth = depth_V*16</span>
<span class="cp">#pragma HLS INTERFACE m_axi offset = slave latency = 32 num_write_outstanding = 32 num_read_outstanding = \</span>
<span class="cp">   1 max_write_burst_length = 64 max_read_burst_length = 2 bundle = gmem5 port = pred512 depth = depth_V</span>
<span class="cp">#pragma HLS INTERFACE m_axi offset = slave latency = 32 num_write_outstanding = 32 num_read_outstanding = \</span>
<span class="cp">   1 max_write_burst_length = 64 max_read_burst_length = 2 bundle = gmem5 port = pred depth = depth_V*16</span>
</pre>
<p>These are the HLS pragmas of the interface. They are responsible for configuring the interface of the FPGA binaries and might be vary with Alveo board. For more information about these pragmas, pleas vitis <a class="reference external" href="https://docs.xilinx.com/r/en-US/ug1393-vitis-application-acceleration/Interfaces">HLS interface pragma</a>.</p>
<p>The steps to compile the C/C++ code into FPGA binaries is in the Makefile of each testcase. It generally has the following two steps:</p>
<ol class="arabic simple">
<li><code class="docutils literal notranslate"><span class="pre">v++</span> <span class="pre">--compile</span></code> to compile the C/C++ code into RTL code. A .xo file is generated in this step.</li>
<li><code class="docutils literal notranslate"><span class="pre">v++</span> <span class="pre">--link</span></code> to link the .xo file into FPGA binaries. A .xclbin file is generated in this step.</li>
</ol>
<p>For more information about compiling the HLS code please visit <a class="reference external" href="https://docs.xilinx.com/r/en-US/ug1393-vitis-application-acceleration/Building-the-Device-Binary">here</a></p>
<p>The code to make use of the FPGA binaries is usually C/C++ code with OpenCL APIs and typically contains the following steps:</p>
<ol class="arabic simple">
<li>Create the entire platform and OpenCL kernels</li>
</ol>
<pre class="highlight literal-block">
<span></span><span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">cl</span><span class="o">::</span><span class="n">Device</span><span class="o">&gt;</span> <span class="n">devices</span> <span class="o">=</span> <span class="n">xcl</span><span class="o">::</span><span class="n">get_xil_devices</span><span class="p">();</span>
<span class="n">cl</span><span class="o">::</span><span class="n">Device</span> <span class="n">device</span> <span class="o">=</span> <span class="n">devices</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
<span class="n">cl</span><span class="o">::</span><span class="n">Context</span> <span class="n">context</span><span class="p">(</span><span class="n">device</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">fail</span><span class="p">);</span>
<span class="n">cl</span><span class="o">::</span><span class="n">CommandQueue</span> <span class="n">q</span><span class="p">(</span><span class="n">context</span><span class="p">,</span> <span class="n">device</span><span class="p">,</span> <span class="n">CL_QUEUE_PROFILING_ENABLE</span> <span class="o">|</span> <span class="n">CL_QUEUE_OUT_OF_ORDER_EXEC_MODE_ENABLE</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">fail</span><span class="p">);</span>
<span class="n">cl</span><span class="o">::</span><span class="n">Program</span><span class="o">::</span><span class="n">Binaries</span> <span class="n">xclBins</span> <span class="o">=</span> <span class="n">xcl</span><span class="o">::</span><span class="n">import_binary_file</span><span class="p">(</span><span class="n">xclbin_path</span><span class="p">);</span>
<span class="n">devices</span><span class="p">.</span><span class="n">resize</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
<span class="n">cl</span><span class="o">::</span><span class="n">Program</span> <span class="n">program</span><span class="p">(</span><span class="n">context</span><span class="p">,</span> <span class="n">devices</span><span class="p">,</span> <span class="n">xclBins</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">fail</span><span class="p">);</span>
<span class="n">cl</span><span class="o">::</span><span class="n">Kernel</span> <span class="n">shortestPath</span><span class="p">;</span>
<span class="n">shortestPath</span> <span class="o">=</span> <span class="n">cl</span><span class="o">::</span><span class="n">Kernel</span><span class="p">(</span><span class="n">program</span><span class="p">,</span> <span class="s">&quot;shortestPath_top&quot;</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">fail</span><span class="p">);</span>
</pre>
<ol class="arabic simple" start="2">
<li>Create CL::Buffers and decide which data needs to be tranfered to FPGA devices and back to host machine.</li>
</ol>
<pre class="highlight literal-block">
<span></span><span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">cl</span><span class="o">::</span><span class="n">Memory</span><span class="o">&gt;</span> <span class="n">ob_in</span><span class="p">;</span>
<span class="n">cl</span><span class="o">::</span><span class="n">Buffer</span> <span class="n">offset_buf</span> <span class="o">=</span> <span class="n">cl</span><span class="o">::</span><span class="n">Buffer</span><span class="p">(</span><span class="n">context</span><span class="p">,</span> <span class="n">CL_MEM_EXT_PTR_XILINX</span> <span class="o">|</span> <span class="n">CL_MEM_USE_HOST_PTR</span> <span class="o">|</span> <span class="n">CL_MEM_READ_WRITE</span><span class="p">,</span>
                        <span class="k">sizeof</span><span class="p">(</span><span class="n">ap_uint</span><span class="o">&lt;</span><span class="mi">32</span><span class="o">&gt;</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="n">numVertices</span> <span class="o">+</span> <span class="mi">1</span><span class="p">),</span> <span class="o">&amp;</span><span class="n">mext_o</span><span class="p">[</span><span class="mi">0</span><span class="p">]);</span>
<span class="n">ob_in</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">offset_buf</span><span class="p">);</span>

<span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">cl</span><span class="o">::</span><span class="n">Memory</span><span class="o">&gt;</span> <span class="n">ob_out</span><span class="p">;</span>
<span class="n">cl</span><span class="o">::</span><span class="n">Buffer</span> <span class="n">result_buf</span> <span class="o">=</span> <span class="n">cl</span><span class="o">::</span><span class="n">Buffer</span><span class="p">(</span><span class="n">context</span><span class="p">,</span> <span class="n">CL_MEM_EXT_PTR_XILINX</span> <span class="o">|</span> <span class="n">CL_MEM_USE_HOST_PTR</span> <span class="o">|</span> <span class="n">CL_MEM_READ_WRITE</span><span class="p">,</span>
                        <span class="k">sizeof</span><span class="p">(</span><span class="kt">float</span><span class="p">)</span> <span class="o">*</span> <span class="p">((</span><span class="n">numVertices</span> <span class="o">+</span> <span class="mi">1023</span><span class="p">)</span> <span class="o">/</span> <span class="mi">1024</span><span class="p">)</span> <span class="o">*</span> <span class="mi">1024</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">mext_o</span><span class="p">[</span><span class="mi">6</span><span class="p">]);</span>
<span class="n">ob_out</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">result_buf</span><span class="p">);</span>
</pre>
<ol class="arabic simple" start="3">
<li>Set arguments for FPGA OpenCL kernels</li>
</ol>
<pre class="highlight literal-block">
<span></span><span class="n">shortestPath</span><span class="p">.</span><span class="n">setArg</span><span class="p">(</span><span class="n">j</span><span class="o">++</span><span class="p">,</span> <span class="n">config_buf</span><span class="p">);</span>
<span class="n">shortestPath</span><span class="p">.</span><span class="n">setArg</span><span class="p">(</span><span class="n">j</span><span class="o">++</span><span class="p">,</span> <span class="n">offset_buf</span><span class="p">);</span>
<span class="n">shortestPath</span><span class="p">.</span><span class="n">setArg</span><span class="p">(</span><span class="n">j</span><span class="o">++</span><span class="p">,</span> <span class="n">column_buf</span><span class="p">);</span>
<span class="n">shortestPath</span><span class="p">.</span><span class="n">setArg</span><span class="p">(</span><span class="n">j</span><span class="o">++</span><span class="p">,</span> <span class="n">weight_buf</span><span class="p">);</span>
<span class="n">shortestPath</span><span class="p">.</span><span class="n">setArg</span><span class="p">(</span><span class="n">j</span><span class="o">++</span><span class="p">,</span> <span class="n">ddrQue_buf</span><span class="p">);</span>
<span class="n">shortestPath</span><span class="p">.</span><span class="n">setArg</span><span class="p">(</span><span class="n">j</span><span class="o">++</span><span class="p">,</span> <span class="n">ddrQue_buf</span><span class="p">);</span>
<span class="n">shortestPath</span><span class="p">.</span><span class="n">setArg</span><span class="p">(</span><span class="n">j</span><span class="o">++</span><span class="p">,</span> <span class="n">result_buf</span><span class="p">);</span>
<span class="n">shortestPath</span><span class="p">.</span><span class="n">setArg</span><span class="p">(</span><span class="n">j</span><span class="o">++</span><span class="p">,</span> <span class="n">result_buf</span><span class="p">);</span>
<span class="n">shortestPath</span><span class="p">.</span><span class="n">setArg</span><span class="p">(</span><span class="n">j</span><span class="o">++</span><span class="p">,</span> <span class="n">pred_buf</span><span class="p">);</span>
<span class="n">shortestPath</span><span class="p">.</span><span class="n">setArg</span><span class="p">(</span><span class="n">j</span><span class="o">++</span><span class="p">,</span> <span class="n">pred_buf</span><span class="p">);</span>
<span class="n">shortestPath</span><span class="p">.</span><span class="n">setArg</span><span class="p">(</span><span class="n">j</span><span class="o">++</span><span class="p">,</span> <span class="n">info_buf</span><span class="p">);</span>
</pre>
<ol class="arabic simple" start="4">
<li>Set up event dependencies</li>
</ol>
<pre class="highlight literal-block">
<span></span><span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">cl</span><span class="o">::</span><span class="n">Event</span><span class="o">&gt;</span> <span class="n">events_write</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
<span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">cl</span><span class="o">::</span><span class="n">Event</span><span class="o">&gt;</span> <span class="n">events_kernel</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
<span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">cl</span><span class="o">::</span><span class="n">Event</span><span class="o">&gt;</span> <span class="n">events_read</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>

<span class="n">q</span><span class="p">.</span><span class="n">enqueueMigrateMemObjects</span><span class="p">(</span><span class="n">ob_in</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="k">nullptr</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">events_write</span><span class="p">[</span><span class="mi">0</span><span class="p">]);</span>  <span class="c1">// Transfer Host data to Device</span>
<span class="n">q</span><span class="p">.</span><span class="n">enqueueTask</span><span class="p">(</span><span class="n">shortestPath</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">events_write</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">events_kernel</span><span class="p">[</span><span class="mi">0</span><span class="p">]);</span> <span class="c1">// execution of the OpenCL kernels (FPGA binaries)</span>
<span class="n">q</span><span class="p">.</span><span class="n">enqueueMigrateMemObjects</span><span class="p">(</span><span class="n">ob_out</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">events_kernel</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">events_read</span><span class="p">[</span><span class="mi">0</span><span class="p">]);</span> <span class="c1">// Transfer Device data to Host</span>
</pre>
<ol class="arabic simple" start="5">
<li>Run OpenCL tasks and execute FPGA binaries</li>
</ol>
<pre class="highlight literal-block">
<span></span><span class="n">q</span><span class="p">.</span><span class="n">finish</span><span class="p">()</span>
</pre>
</div>
</div>
<div class="section" id="l1-api">
<span id="tutorial-l1"></span><h3>L1 API<a class="headerlink" href="#l1-api" title="Permalink to this headline">¶</a></h3>
<div class="section" id="id8">
<h4>Target Audience<a class="headerlink" href="#id8" title="Permalink to this headline">¶</a></h4>
<p>Target audience of L1 API are users who is familiar with HLS programming and want to tests / profile / modify operators or add new operator.
With the HLS test project provided in L1 layer, user could get:</p>
<ol class="arabic simple">
<li>Function correctness test, both in C-simulation and Co-simulation</li>
<li>Performance profiling from HLS synthesis report and Co-simulaiton</li>
<li>Resource and timing evaluation from Vivado synthesis.</li>
</ol>
</div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
<!-- Atalwar: Moved the footer code to layout.html to resolve conflict with the Xilinx template -->
</footer>

        </div>
      </div>


	  <!-- Sphinx Page Footer block -->
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="guide_L1/api.html" class="btn btn-neutral float-right" title="API Document" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="release.html" class="btn btn-neutral float-left" title="Release Note" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo" class="copyright">
    <p class="footerinfo">

    </p>
	<br>
  </div>
      </div>
    </section>


  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

   <script type="text/javascript">
    jQuery(function() { Search.loadIndex("searchindex.js"); });
  </script>

  <script type="text/javascript" id="searchindexloader"></script>


  
  
    
  



  <!--  Xilinx template footer block -->
							</div>
						</div>
					</div>
				</div>
				<div class="xilinxExperienceFragments experiencefragment aem-GridColumn--default--none aem-GridColumn aem-GridColumn--offset--default--0 aem-GridColumn--default--16">
					<div class="xf-content-height">
						<div class="aem-Grid aem-Grid--16 aem-Grid--default--16 ">
							<div class="footer parbase aem-GridColumn--default--none aem-GridColumn aem-GridColumn--offset--default--0 aem-GridColumn--default--16">
								<noindex>
                  <!-- make footer fixed - NileshP -->
                  <style>
                        .footer {
                        position: fixed;
                        left: 0;
                        bottom: 0;
                        width: 100%;
                        }
                  </style>
                  <!-- make footer fixed NileshP-->
									<footer>
										<div class="aem-Grid aem-Grid--16">
											<div class="aem-GridColumn aem-GridColumn--xxxlarge--none aem-GridColumn--xsmall--16 aem-GridColumn--offset--xsmall--0 aem-GridColumn--xlarge--none aem-GridColumn--xxlarge--none aem-GridColumn--default--none aem-GridColumn--offset--large--1 aem-GridColumn--xlarge--12 aem-GridColumn--offset--default--0 aem-GridColumn--xxlarge--10 aem-GridColumn--offset--xlarge--2 aem-GridColumn--offset--xxlarge--3 aem-GridColumn--offset--xxxlarge--4 aem-GridColumn--xsmall--none aem-GridColumn--large--none aem-GridColumn aem-GridColumn--large--14 aem-GridColumn--xxxlarge--8 aem-GridColumn--default--16">
												<div class="container-fluid sub-footer">
													<div class="row">
														<div class="footerSocial parbase">
														
															<div class="col-md-push-6 col-lg-push-6 col-md-6 col-lg-6">
																<div class="lang-select dropup hidden-md hidden-lg">
		<button data-toggle="dropdown">
			<span class="fas fa-globe" aria-hidden="true"></span>
			<span>
				
					English
				</span>
		<span class="far fa-angle-down" aria-hidden="true"></span>
	</button>
	<ul class="dropdown-menu">
		<li>
				<a target="_blank" href="https://japan.xilinx.com/" target="_self">
					日本語
				</a>
			</li>
		<li>
				<a target="_blank" href="https://china.xilinx.com/" target="_self">
					简体中文
				</a>
			</li>
		</ul>
	</div>
																<ul class="list-inline pull-right social-menu">
																	<li>
																		<a target="_blank" href="https://www.linkedin.com/company/xilinx">
																		<span class="linkedin icon"></span>
																		<span class="sr-only">Connect on LinkedIn</span>
																		</a>
																	</li>
																	<li>
																		<a target="_blank" href="https://www.twitter.com/XilinxInc">
																		<span class="twitter icon"></span>
																		<span class="sr-only">Follow us on Twitter</span>
																		</a>
																	</li>
																	<li>
																		<a target="_blank" href="https://www.facebook.com/XilinxInc">
																		<span class="facebook icon"></span>
																		<span class="sr-only">Connect on Facebook</span>
																		</a>
																	</li>
																	<li>
																		<a target="_blank" href="https://www.youtube.com/XilinxInc">
																		<span class="youtube icon"></span>
																		<span class="sr-only">Watch us on YouTube</span>
																		</a>
																	</li>
																	<li>
																		<a target="_blank" href="https://www.xilinx.com/registration/subscriber-signup.html">
																		<span class="newsletter icon"></span>
																		<span class="sr-only">Subscribe to Newsletter</span>
																		</a>
																	</li>
																</ul>
																	<div class="lang-select dropup hidden-xs hidden-sm">
	<button data-toggle="dropdown">
		<span class="fas fa-globe" aria-hidden="true"></span>
		<span>
			
				English
			</span>
		<span class="far fa-angle-down" aria-hidden="true"></span>
	</button>
	<ul class="dropdown-menu">
		<li>
				<a target="_blank" href="https://japan.xilinx.com/" target="_self">
					日本語
				</a>
			</li>
		<li>
				<a target="_blank" href="https://china.xilinx.com/" target="_self">
					简体中文
				</a>
			</li>
		</ul>
	</div>
															</div>
														</div>
														<div class="col-md-pull-5 col-lg-pull-5 col-md-5 col-lg-5">
															<span class="copyright">©2022 Advanced Micro Devices, Inc</span>
														</div>

													</div>
													                    <div class="movethisrowtoleft row">
                        <div class="col-xs-24">
                            <ul class="sub-menu">
                                <li><a target="_blank" href="https://www.amd.com/en/corporate/copyright">Terms and Conditions</a></li>
                                <li><a target="_blank" href="https://www.amd.com/en/corporate/privacy">Privacy</a></li>
                                <li><a target="_blank" href="https://www.amd.com/en/corporate/cookies">Cookie Policy</a></li>
                                <li><a target="_blank" href="https://www.amd.com/en/corporate/trademarks">Trademarks</a></li>
                                <li><a target="_blank" href="https://www.amd.com/system/files/documents/statement-human-trafficking-forced-labor.pdf">Statement on Forced Labor</a></li>
                                <li><a target="_blank" href="https://www.amd.com/en/corporate/competition">Fair and Open Competition</a></li>
                                <li><a target="_blank" href="https://www.amd.com/system/files/documents/amd-uk-tax-strategy.pdf">UK Tax Strategy</a></li>
								<li><a target="_blank" href="https://docs.xilinx.com/v/u/9x6YvZKuWyhJId7y7RQQKA">Inclusive Terminology</a></li>
                                <li><a href="#cookiessettings" class="ot-sdk-show-settings">Cookies Settings</a></li>
                            </ul>
                        </div>
                    </div>
												</div>
											</div>
										</div>
									</footer>
								</noindex>
							</div>
						</div>
					</div>
				</div>
<div class="backToTop parbase aem-GridColumn--default--none aem-GridColumn aem-GridColumn--offset--default--0 aem-GridColumn--default--16"><noindex>
    <span data-component="backToTopButton" class="backToTopButton loaded">
        <ul>
            <li>
                <a href="https://www.author.xilinx.com/xx/rebrand/amd/en-amd-xilinx-header-footer.html#top" class="btn top">
                    <span class="fas fa-angle-up" aria-hidden="true"></span>
                </a>
            </li>
        </ul>
    </span>
</noindex></div>
			</div>
		</div>


		<script>window.CQ = window.CQ || {}</script>
		<script src="https://static.cloud.coveo.com/searchui/v2.4382/js/CoveoJsSearch.Lazy.min.js"></script>
		<script>
			var underscoreSetup = function () {
			  _.templateSettings.interpolate = /\{\{=([^-][\S\s]+?)\}\}/g;
			  _.templateSettings.evaluate = /\{\{([^-=][\S\s]+?)\}\}/g;
			  _.templateSettings.escape = /\{\{-([^=][\S\s]+?)\}\}/g;
			}

			underscoreSetup();
		</script>
	</body>
</html>